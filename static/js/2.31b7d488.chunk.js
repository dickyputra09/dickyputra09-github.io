(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{874:function(e,t,o){"use strict";o.r(t);var a,n=o(4),r=o(12),i=o(5),l=o(7),c=o(3),s=o(8),h=o(406),d=o(14),g=o(392),u=o(30),f=o(10),b=o(0),p=o(6),m=o(319),v=o(22),y=o(13),k=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],O={"initial.dataset.entities":function(){return{"path.appearing":function(){return k[0].slot="plot",k},"path.updating":function(e){return[{finalAttr:function(){return e.finalAttr}}]},"labelConnectors.appearing":function(){return k[0].slot="final",k},"labelConnectors.updating":null,"entityLabel.appearing":function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":function(){return k[0].slot="final",k},"markerItem.updating":function(e){return[{finalAttr:function(){return e.finalAttr}}]}}},"initial.group.mapGroup":function(){return{"group.appearing":function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},"group.updating":function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},"*":null}}},C=o(18),x=Object(y.b)("redraphael","plugin"),j=window.navigator.userAgent,A=/msie/i.test(j)&&!window.opera,w=window.Math,F=w.min,L=w.max,E=/stroke/gi,S=/AppleWebKit/.test(j),_=w.ceil,T=function(e,t){var o=t?Object(b.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=b.Lb,o},I=function(e,t){var o,a={};if(t=t||1,!e||"object"!=typeof e)return a;for(o in e)E.test(o)||("stroke-width"===o?(a[o]=+e[o]/t,S&&(a[o]=a[o]&&_(a[o])||0)):a[o]=e[o]);return a},P={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*F(t,e-t)}},R={top:function(){return arguments[1]},middle:function(e,t){return 2*F(t,e-t)},bottom:function(e,t){return e-t}};Object(y.a)({name:"mapsAnimation",type:"animationRule",extension:O}),function(e){var t,o,a,n=window.parseFloat,r=e._createNode,i=e._setFillAndStroke,l=e.el.constructor,c={Q:"L",Z:"X",q:"l",z:"x",",":" "},s=/,?([achlmqrstvxz]),?/gi,h=function(){return this.join(",").replace(s,t)};e.svg?(t="$1",o=function(){var o=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);o?"string"==typeof o?o=o.replace(s,t):o.toString=h:o="M0,0",this.node.setAttribute("d",o.toString())},e._engine.litepath=function(t,o,a,n,c){var s,h=r("path");return(n||o).canvas.appendChild(h),(s=new l(h,o,n)).type="litepath",s.id=h.raphaelid=e._oid++,h.raphael=!0,i(s,c||{fill:"none",stroke:"#000"}),s},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(t=function(e,t){return c[t]||t},a=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},o=function(e){return e?"string"==typeof e?e=e.replace(s,t):e.toString=h:e="M0,0",this.node.path=e,this},e._engine.litepath=function(t,o,i,c,s){var h,d=r("shape"),g=d.style,u=new l(d,o,c);return g.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",i=n(i),isNaN(i)?d.coordsize="21600 21600":(u._.bzoom=i,g.width="1px",g.height="1px",d.coordsize=u._.bcoord=i+" "+i),d.coordorigin=o.coordorigin,u.type="litepath",u.id=d.raphaelid=e._oid++,d.raphael=!0,u._transform=u.transform,u.transform=a,e._setFillAndStroke(u,s||{fill:"none",stroke:"#000"}),(c||o).canvas.appendChild(d),(h=r("skew")).on=!0,d.appendChild(h),u.skew=h,u},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")}),e.fn.litepath=function(t,a,n){var r,i,c;return"object"==typeof t&&t.constructor!==l&&(r=t,i=(t=t.litepath).zoom,n=t.group),a&&a.constructor===l?(n=a,i=void 0):i=a,t&&t.constructor===l&&(n=t,t=""),(c=e._engine.litepath(t,this,i,n,r)).ca.litepath=o,t&&c.attr("litepath",e.is(t,"array")?[t]:t),this.__set__&&this.__set__.push(c),this._elementsById[c.id]=c}}(x);var M=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).components={},e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getName",value:function(){return"entities"}},{key:"getType",value:function(){return"dataset"}},{key:"configureAttributes",value:function(e){if(e){this.JSONData={data:e};var o,n,r,i,l,c,s,h,d=this,g=d.getFromEnv("chart").jsonData,u=d.config,f=g.map||g.chart,p=[],m=d.getFromEnv("colorManager"),v=g.entitydef||[];for(l in!u.attachEvent&&m&&(d.addExtEventListener("legendUpdate",function(){if("legend"===(h=arguments[1]).component)d.legendInteractivity(h.legendItem,h.colorObj);else for(p=h.maxMinArray,c=p.length,s=0;s<c;s++)d.updateEntityColors(p[s].min,p[s].max)},m),u.attachEvent=!0),o=g.data&&g.data[0]&&g.data[0].data?d.JSONData=g.data[0].data||[]:d.JSONData=g.data||[],u.useSNameAsId=Object(b.Ab)(f.usesnameasid,0),this._redefineEntities(v),n=d.components.data,u.showTooltip=Object(b.Ab)(f.showtooltip,1),u.showHoverEffect=Object(b.Ab)(f.showhovereffect,0),o=function(e){for(var t,o=e&&e.length||0,n={};o--;)(t=e[o]).id!==a&&(n[t.id.toLowerCase()]=t);return n}(o),d.calculateDataLimits(),g.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),n)r=o[l],i=n[l],r?this._configureEntity(l,i,Object(b.mb)(t._sanitizeEntityOptions(Object(b.T)({},r)),i.config)):this._configureEntity(l,i,i.config)}}},{key:"updateEntityColors",value:function(e,o){var a,n,r,i,l,c=this.components.data,s=this.getFromEnv("chart"),h={"fill-opacity":0};for(i in c)r=(n=(a=c[i]).config).cleanValue,l={"fill-opacity":(n.alphaArr||[])[0]/100||1},r<e||r>o?(t.setCustomAttrs(a,h,s),a.hidden=!0):(a.hidden=!1,t.setCustomAttrs(a,l,s))}},{key:"legendInteractivity",value:function(e,o){var a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=s.components.data,g=e.config,u=e.hasState("hidden"),f=s.getFromEnv("colorManager"),b={},p={"fill-opacity":0};for(a in h.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(a)&&(r=(g=(n=d[a]).config).cleanValue,c=f.getColorObj(r),i=g.visibleEntityAttr,b["fill-opacity"]=i["fill-opacity"],l=u?b:p,o.code===(!c.outOfRange&&c.code)&&(n.hidden=!u,t.setCustomAttrs(n,l,h),u?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}},{key:"calculateDataLimits",value:function(){var e,t,o,a,n=this.getFromEnv("chart"),r=this.config,i=n.jsonData.data||[],l=this.getFromEnv("number-formatter"),c=1/0,s=-1/0;for(a=0,o=i.length;a<o;a++)t=i[a].value,e=l.getCleanValue(t),c=F(c,e),s=L(s,e);r.max=s,r.min=c}},{key:"_configureEntity",value:function(e,t,o){var n,r,i,l,c,s,h,d,g,u,f,m,v,y,k,O,C,x,j,A,w,F,L=this,E=L.getFromEnv("chart"),S=L.config,_=this.getFromEnv("number-formatter"),I=E.config.entityOpts,P=t.config,R=t.labelConfig,M=o.value,B=P.cleanValue=_.getCleanValue(M),D=P.formattedValue=B===a?a:_.dataLabels(B),V=Object(b.Ab)(o.showtooltip,I.showTooltip),N=this._getDefaultTooltip(t,o,L),G={formattedValue:D,sName:o.shortLabel,lName:o.label},H=I.dataLabels.style,W=P.toolText=V?Object(b.wb)(Object(b.yb)(Object(b.vb)(Object(b.yb)(o.tooltext,I.tooltext,N),[1,2,7,38,39],G,o))):"",z=P.borderColor=Object(b.yb)(o.bordercolor,I.borderColor),X=P.borderAlpha=Object(b.yb)(o.borderalpha,I.borderAlpha),K=P.borderThickness=Object(b.Ab)(o.borderthickness,I.borderThickness),Y=I.hoverOnNull,J=P.useHoverColor=Object(b.Ab)(o.showhovereffect,o.usehovercolor,Y?I.showHoverEffect:isNaN(M)?0:I.showHoverEffect),U=P.labelAlignment,Z=L.getFromEnv("colorManager");if(t.hidden=!1,P.showLabel=Object(b.Ab)(o.showlabel,I.showLabels),P.labelPadding=Object(b.Ab)(o.labelpadding,I.labelPadding),P.fontFamily=Object(b.yb)(o.font,H.fontFamily),P.fontSize=Object(b.Ab)(parseInt(o.fontsize,10),parseInt(H.fontSize,10)),P.fontBold=Object(b.Ab)(o.fontbold,0),P.fontColor=Object(b.yb)(o.fontcolor,H.color),P.connectorColor=Object(b.yb)(o.labelconnectorcolor,I.connectorColor),P.connectorAlpha=Object(b.yb)(o.labelconnectoralpha,I.connectorAlpha),P.hoverBorderThickness=Object(b.Ab)(o.borderhoverthickness,o.hoverborderthickness,I.hoverBorderThickness),P.hoverBorderColor=Object(b.yb)(o.borderhovercolor,o.hoverbordercolor,I.hoverBorderColor,P.borderColor),P.hoverBorderAlpha=Object(b.yb)(o.borderhoveralpha,o.hoverborderalpha,I.hoverBorderAlpha,P.borderAlpha),P.connectorThickness=Object(b.Ab)(o.labelconnectorthickness,I.connectorThickness),P.origConnectorThickness=P.connectorThickness,P.borderThickness=K,P.link=o.link,P.isVisible=!0,P.id=e,P.originalId=o.origId,null!==B&&((n=Z&&Z.getColor(B))&&!n.outOfRange&&(O=n.code,n.oriAlpha!==a&&(C=n.oriAlpha+""))),Object(b.yb)(o.color,o.alpha,o.angle,o.ratio)===a?(y=T({color:Object(b.yb)(O,I.fillColor),alpha:Object(b.yb)(C,I.fillAlpha),angle:Object(b.yb)(I.fillAngle),ratio:Object(b.yb)(I.fillRatio)}),v=T({color:Object(b.yb)(I.nullEntityColor),alpha:Object(b.yb)(I.nullEntityAlpha),angle:Object(b.yb)(I.nullEntityAngle),ratio:Object(b.yb)(I.nullEntityRatio)}),c=(g=null===B?v:y).FCcolor.color,s=g.FCcolor.alpha,h=g.FCcolor.angle,d=g.FCcolor.ratio):(c=Object(b.yb)(o.color,O,I.fillColor),s=Object(b.yb)(o.alpha,C,I.fillAlpha),h=Object(b.yb)(o.angle,I.fillAngle),d=Object(b.yb)(o.ratio,I.fillRatio),g=T({color:c,alpha:s,angle:h,ratio:d})),""===W&&(S.showTooltip=0),P.visibleEntityAttr={stroke:Object(p.c)(z,X),fill:(P.fillColor=g).toString(),"fill-opacity":s/100},F=s.split(","),P.alphaArr=F,J&&(Object(b.yb)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===a?(!I.hoverColorObject&&(I.hoverColorObject=T({color:I.hoverFillColor,alpha:I.hoverFillAlpha,angle:I.hoverFillAngle,ratio:I.hoverFillRatio})),k=I.hoverColorObject):(c=Object(b.yb)(o.fillhovercolor,o.hoverfillcolor,I.hoverFillColor),s=Object(b.yb)(o.fillhoveralpha,o.hoverfillalpha,I.hoverFillAlpha),h=Object(b.yb)(o.fillhoverangle,o.hoverfillangle,I.hoverFillAngle),d=Object(b.yb)(o.fillhoverratio,o.hoverfillratio,I.hoverFillRatio),k=T({color:c,alpha:s,angle:h,ratio:d})),P.hoverColor=k),R||(R=t.labelConfig={}),u=P.fontColor,f=P.fontFamily,m=P.fontBold,W=P.toolText,r=P.link,U?(i=U[0],l=U[1]):(i="center",l="middle"),R.align=i,R.vAlign=l,R.bgColor="",R.borderColor="",R.fontColor=u,R.fontFamily=f,R.fontBold=m,R.toolText=W,R.link=r,"object"==typeof P.options)for(x=P.entityLabels=P.entityLabels||[],w=(A=P.labels||[]).length;w--;)x[w]||(x[w]={config:{}}),R=x[w].config,(U=A[w].labelAlignment)?(i=U[0],l=U[1]):(i="center",l="middle"),R.align=i,R.vAlign=l,R.displayValue=L.getDisplayValue(t,A[w],P.options.isDataEnabled,!w,o),R.bgColor="",R.borderColor="",R.toolText=W,R.align=i,R.vAlign=l,R.bgColor="",R.borderColor="",R.fontColor=u,R.fontFamily=f,R.fontBold=m,R.toolText=W;else j={shortText:P.shortLabel,text:P.label},R.displayValue=L.getDisplayValue(t,j,!0,!0,o)}},{key:"getDisplayValue",value:function(e,t,o,n,r){var i,l=this.getFromEnv("chart").config.entityOpts,c=e.config,s=c.cleanValue,h=c.formattedValue,d=l.labelSepChar;return o?n&&"undefined"!=typeof r.displayvalue?i=r.displayvalue:(i=Object(b.yb)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==s&&(i=i===a?h:i+d+h)):i=c.label,i}},{key:"_redefineEntities",value:function(e){var t,o,a,n,r,i,l,c,s,h,d,g,u=this,f=u.config,p={},m={},v=u.getFromEnv("chart").config.entities,y=f.useSNameAsId,k=0;for(t=e.length;t--;)if(a=(o=e[t]).internalid,n=o.newid?o.newid:a,r=o.sname,i=o.lname,g=v[a],a=Object(b.Nb)(a),n=(n=Object(b.Nb)(n))&&n.toLowerCase(),g){for(d in p[n]=c={origId:a},m[a]=!0,g)c[d]=g[d];c.shortLabel=r||g.shortLabel,c.label=i||g.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(l in(h=u.components.data)||(h=u.components.data={}),p)h[l=l.toLowerCase()]||(h[l]={config:{}}),h[l].config=p[l],k+=1;for(l in s=h,v)if(c=v[l],!m[l=Object(b.Nb)(l)]){for(d in y?(!(g=s[c.shortLabel.toLowerCase()])&&(g=s[c.shortLabel.toLowerCase()]={}),g.config={},g.origId=c.shortLabel):(!(g=s[l.toLowerCase()])&&(g=s[l.toLowerCase()]={}),g.config={},g.config.origId=l),c)g.config[d]=c[d];k+=1}f.entityCount=k}},{key:"draw",value:function(){var e=this.config,t=this.getFromEnv("chart"),o=b.ib?200:10;this.config.ready=!1,e.BATCH_SIZE=o,e.labelBatchSize=b.ib?200:20,this._batchRender()(0),t.config.entityFlag=!0,t.checkComplete()}},{key:"_batchRender",value:function(){var e,t,o,n,r,i=this,l=i.config,c=i.getFromEnv("chart").config.entities.firstEntity,s=i.components.data,h=l.BATCH_SIZE,d=l.entityKeys=c?i._getKeys(c,s):Object.keys(s),g=l.entityLength=d.length;return function l(c){for(e=c,o=0;d[e]!==a;)if(t=s[d[e]],r=i.drawEntity(t,h),o+=r,t.config.drawn&&((n=e===g-1?t:s[d[e-1]])&&(n.config.drawn=!1,n.config.outlineStartIndex=a),e++),o>=h){i.addJob("entityDraw",l.bind(this,e),C.b.entitydraw);break}e===g&&(i._addEventListenersToEntities(0),i.initComplete())}}},{key:"_addEventListenersToEntities",value:function(e){var t,o,a,n=this,r=n.components.data,i=n.config,l=i.BATCH_SIZE,c=i.entityKeys,s=i.entityLength,h=0;for(t=e;t<s;t++)if((a=(o=r[c[t]]).config.options)&&!1===a.isDataEnabled||n.addMouseGestures(o),++h===l){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),C.b.entitydraw);break}}},{key:"_getDefaultTooltip",value:function(e,t){var o,n,r=e.config.cleanValue,i=e.config.formattedValue,l=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(n=t.labels&&t.labels[0]))return a;o=(l.useSNameInTooltip?n.shortText:n.text)+(null===r?"":l.tooltipSepChar+i)}else o=(l.useSNameInTooltip?t.shortLabel:t.label)+(null===r?"":l.tooltipSepChar+i);return o}},{key:"drawEntity",value:function(e,t){var o,n,r,i,l,c,s,h,d=this,g=d.getFromEnv("chart"),u=g.getFromEnv("animationManager"),f=e.config,p=b.ib||!A?"litepath":"path",m=g.config.entityOpts,v=f.outlines,y=d.getFromEnv("toolTipController"),k=this.getLinkedParent().getChildContainer("plot"),O=this.getLinkedParent().getChildContainer("plotShadow"),C=f.toolText,x=m.shadow,j=[],w={};if(d._configureEntityDrawingParams(e),n=(f=e.config).visibleEntityAttr,h=f.shadowOptions,o=f.outlineStartIndex===a?v.length:f.outlineStartIndex,e.graphics||(e.graphics={}),c=0,j=f.outlinePath||(f.outlinePath=[]),s=f.customStrokeWidthModifier,"object"==typeof f.options){for(;o--;)if(j=v[o].outline,r=!0===f.options.isDataEnabled?n:Object(b.T)(Object(b.T)({},n),I(v[o].style,s)),(i=e.graphics.outlines)||(i=e.graphics.outlines=[]),i[o]||(i[o]={}),l=i[o].outline,r[p]=j,(l=i[o].outline=u.setAnimation({el:p,container:k,attr:r,component:d,label:"path"})).shadow(!!x&&h,O),y.enableToolTip(l,C),c++,f.outlineStartIndex=o,c===t)return c;return f.drawn=!0,c}for(;o--;)if(j=v[o].concat(j),c++,f.outlineStartIndex=o,c===t)return f.outlinePath=j,c;return e.graphics.outlines||(n[p]=j),Object.assign(w,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=u.setAnimation({el:e.graphics.outlines||p,container:k,attr:w,component:d,label:"path"}),f.drawn=!0,f.outlineStartIndex=0,f.outlinePath=[],e.graphics.outlines.shadow(!!x&&h,O),y.enableToolTip(e.graphics.outlines,C),c}},{key:"_configureEntityDrawingParams",value:function(e){var t,o=this.getFromEnv("chart"),a=e.config,n=o.config.entityOpts,r=o.config.scalingParams,i=!A||b.ib,l=r.scaleFactor,c=r.strokeWidth,s=(i?o.baseScaleFactor:1)*c,h=1===n.scaleBorder,d=a.borderThickness,g=a.alphaArr,u=a.origConnectorThickness,f=a.hoverBorderThickness,p=a.visibleEntityAttr,m=p["fill-opacity"];a.shadowOptions={scalefactor:[l,l*o.config.baseScaleFactor],opacity:L.apply(w,g)/100,useFilter:0},a.fillOpacity=e.hidden?0:m,i?(d=a.entityBorderThickness=h?d*s:d/l,u/=l,t=h?l:r.sFactor,f&&(f=a.hoverBorderThickness=h?f*s:f/l)):(d=h?d*c:d,t=h?r.scaleFactor:o.baseScaleFactor),a.entityBorderThickness=d,a.connectorThickness=u,a.customStrokeWidthModifier=t,p["stroke-width"]=d,p.transform=b.ib||!A?"":r.transformStr}},{key:"drawLabels",value:function(e){var t,o,a,n,r=this,i=e,l=r.getFromEnv("chart"),c=r.config,s=c.labelBatchSize,h=c.entityLength,d=[],g=l.getChildContainer("upperAnnotationGroup"),u=0,f=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[u],b=0,p=0,v=l.getFromEnv("toolTipController"),y=l.config.annotationConfig;for(t in f||(n=new m.a,r.attachChild(n,"mapLabelAnnotations"),(f=r.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),f.clear(),f._renderer&&(f._renderer=null),y.showbelow=0,i){if(r.drawLabel(i[t],d),++b===s){for(f.annotation.injectDependency("paper",l.getFromEnv("paper")),f.annotation.injectDependency("toolTipController",v),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=f.addGroup(Object.assign(y,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),r),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",d[o].onmouseover),a.items[o].addEventListener("fc-mouseout",d[o].onmouseout),a.items[o].addEventListener("fc-click",d[o].onclick);u++,(f=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[u])||(n=new m.a,r.attachChild(n,"mapLabelAnnotations"),(f=r.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),f.clear(),f._renderer&&(f._renderer=null),b=0,d=[]}else if(p==h-1){for(f.annotation.injectDependency("paper",l.getFromEnv("paper")),f.annotation.injectDependency("toolTipController",v),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=f.addGroup(Object.assign(y,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),r),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",d[o].onmouseover),a.items[o].addEventListener("fc-mouseout",d[o].onmouseout),a.items[o].addEventListener("fc-click",d[o].onclick)}p++}r.drawLabelConnFn(0)}},{key:"drawLabelConnFn",value:function(e){var t,o,a,n,r,i=this,l=i.config,c=i.components.data,s=l.BATCH_SIZE,h=l.entityKeys,d=h.length,g=0;for(o=e;o<d;o++){if("object"==typeof(n=(r=c[h[o]]).config).options)for(t=(a=n.labels)&&a.length||0;t--;)a[t].labelConnectors&&(i.drawLabelConnectors(r,a[t].labelConnectors,i),g++);else n.labelConnectors&&(i.drawLabelConnectors(r,n.labelConnectors,i),g++);if(g===s){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),C.b.entitydraw);break}}}},{key:"_getLabelObject",value:function(e,t,o){var n,r,i,l,c,s,h,d,g,u,f,b=this,p=b.getFromEnv("chart"),m=e.config,v=p.config.scalingParams,y=e.graphics&&e.graphics.outlines,k=m.fontSize,O=m.labelPadding,C=m.labels||[],x=m.entityLabels||[];return t===a?(n=e.labelConfig,r=m.labelPosition,i=m.labelAlignment):(f=C[t],l=(n=x[t].config).style=f.style,r=f.labelPosition,i=f.labelAlignment),r?(c=r[0],s=r[1]):(c=(h=y.getBBox()).x+h.width/2,s=h.y+h.height/2),i?("right"===(d=i[0])?c-=O:"left"===d&&(c+=O),"top"===(g=i[1])?s-=O:"bottom"===g&&(s+=O)):(d="center",g="middle"),u=parseFloat(k)/v.sFactor,!o&&l&&(l.color&&(n.fontColor=l.color),l["font-size"]&&(u=parseFloat(l["font-size"])/v.sFactor),l["font-family"]&&(n.fontFamily=l["font-family"]),l["font-weight"]!==a&&(n.fontBold="bold"===l["font-weight"])),n.x=c.toString(),n.y=s.toString(),n.wrap=1,n.type="text",n.fontSize=u,{x:c.toString(),y:s.toString(),wrapwidth:P[d](void 0,c+void 0)-O,wrapheight:R[g](void 0,s+void 0)-O,wrap:1,type:"text",align:n.align,valign:n.vAlign,text:n.displayValue,tooltext:n.toolText,css:n.link!==a&&{cursor:"pointer",_cursor:"hand"},bgcolor:n.bgColor,bordercolor:n.borderColor,fillcolor:n.fontColor,fontsize:n.fontSize,font:n.fontFamily,bold:n.fontBold,onclick:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityClick(n[o].outline,t);else b.entityClick(n,t)},onmouseover:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOver(n[o].outline,t);else b.entityRollOver(n,t)},onmouseout:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOut(n[o].outline,t);else b.entityRollOut(n,t)},ontouchstart:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOver(n[o].outline,t);else b.entityRollOver(n,t);b.entityRollOver(n,t)}}}},{key:"drawLabel",value:function(e,t){var o,n,r,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(n=(r=i.labels)&&r.length||0,o=i.options.isDataEnabled;n--;)t.push(this._getLabelObject(e,n,o,!n));else t.push(this._getLabelObject(e,a,!0,!0))}},{key:"drawLabelConnectors",value:function(e,t,o){for(var a,n,r=e.config,i=this.getFromEnv("chart"),l=i.getFromEnv("animationManager"),c=i.config.scalingParams,s=o.getLinkedParent().getChildContainer("plot"),h=t&&t.length||0,d=r.showLabel;h--;)n=t[h],a=e.graphics.connectorElem,d?e.graphics.connectorElem=a=l.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:n,opacity:1,transform:b.ib||!A?"":c.transformStr,stroke:Object(p.c)(r.connectorColor,r.connectorAlpha),"shape-rendering":"crisp","stroke-width":r.connectorThickness},container:s,component:this,label:"labelConnectors"}):a&&a.hide()}},{key:"entityClick",value:function(e,t){var o=e.node.__entity,n=this.getFromEnv("chart"),r=n.config.scalingParams,i=o.graphics.outlines.getBBox(),l=n.getFromEnv("linkClickFN"),c=o.config,s=c.link;i.width*=r.scaleFactor,i.height*=r.scaleFactor,i.x=i.x*r.scaleFactor+r.translateX,i.y=i.y*r.scaleFactor+r.translateY,i.x2=i.x+i.width,i.y2=i.y+i.height,n.fireChartInstanceEvent("entityclick",c.eventArgs,t),s!==a&&l.call({link:s,entity:o,entityBox:i},!0)}},{key:"entityRollOver",value:function(e,t){var o=e.node.__entity,a=o.config,n=this.getFromEnv("chart"),r=n.getFromEnv("animationManager"),i=a.hoverAttr;n.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):a.useHoverColor&&a.isVisible&&!o.hidden&&i&&(n.config.hoverEntity=e,r.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}},{key:"entityRollOut",value:function(e,t){var o=e.node.__entity,a=this,n=a.getFromEnv("chart"),r=n.getFromEnv("animationManager"),i=o.config.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),o.config.timer=setTimeout(function(){!0!==o.hidden&&i&&(r.setAnimation({el:e,attr:i,component:a,state:"updating",label:"path"}),e.data("hovered",!1))},100)}},{key:"addMouseGestures",value:function(e){var t,o,n,r,i=e.config,l=i.originalId,c=this,s=e.graphics,h=i.useHoverColor,d=i.hoverBorderThickness,g=i.hoverBorderColor,u=i.hoverBorderAlpha,f=i.entityBorderThickness,m=i.borderColor,v=i.borderAlpha,y=i.link,k=i.visibleEntityAttr,O=function(t){y!==a&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",i.eventArgs),t.data("groupId","groupId"+l),t.node.__entity=e,e._listenersBinded||t.on("fc-click",c.entityClick.bind(c,t)).hover(c.entityRollOver.bind(c,t),c.entityRollOut.bind(c,t))};for(t in i.eventArgs={value:i.cleanValue,label:i.label,shortLabel:i.shortLabel,originalId:i.origId,id:i.id||i.origId},i.legacyEventArgs={value:i.value,lName:i.label,sName:i.shortLabel,id:i.originalId||i.id},h&&(i.hoverAttr={fill:Object(b.Lb)(i.hoverColor)},i.revertAttr={fill:Object(b.Lb)(i.fillColor),stroke:Object(b.Lb)(i.borderColor,i.borderAlpha)},i.revertAttr["fill-opacity"]=k["fill-opacity"],d!==f&&(i.hoverAttr["stroke-width"]=Object(b.Ab)(d,f),i.revertAttr["stroke-width"]=f),(g!==m||u!==v)&&(i.hoverAttr.stroke=Object(p.c)(g,u),i.revertAttr.stroke=Object(p.c)(m,v))),s)if(s.hasOwnProperty(t))if(s[t]instanceof Array){for(o=0,n=(r=s[t]).length;o<n;o++)O(r[o].outline);e._listenersBinded=!0}else O(s[t]),e._listenersBinded=!0}},{key:"getDataLimits",value:function(){var e=this.config;return{max:e.max,min:e.min}}},{key:"initComplete",value:function(){var e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()}}],[{key:"setCustomAttrs",value:function(e,t){e&&e.graphics.outlines.attr(t)}},{key:"_sanitizeEntityOptions",value:function(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}},{key:"_getKeys",value:function(e,t){for(var o=[e],a=e;t[a];)a=t[a].nextId,o.push(a);return o}}]),t}(d.a),B=function(e,t,o,a,n){var r=Math.pow;return r(o-e,2)+r(a-t,2)<=r(n,2)},D=Math.PI,V=Math.cos,N=Math.sin,G=Math.max,H=Math.min,W=D/180,z=function(e,t,o,a,n,r){var i,l,c;return i=(a-t)*(n-o),l=(o-e)*(r-a),isNaN(i)&&(i=0),isNaN(l)&&(l=0),0===(c=i-l)?0:0<c?1:2},X=function(e,t,o,a,n,r){return!!(o<=G(e,n)&&o>=H(e,n)&&a<=G(t,r)&&a>=H(t,r))},K=function(e,t,o,a,n,r,i,l){var c=z(e,t,o,a,n,r),s=z(e,t,o,a,i,l),h=z(n,r,i,l,e,t),d=z(n,r,i,l,o,a);return!(c===s||h===d)||!(0!==c||!X(e,t,n,r,o,a))||!(0!==s||!X(e,t,i,l,o,a))||!(0!==h||!X(n,r,e,t,i,l))||!(0!==d||!X(n,r,o,a,i,l))},Y=function(e,t,o,a,n,r,i){var l,c,s,h,d,g,u,f=0,b=!1;if(B(e,t,o,a,n)&&3<=r){for(c=void 0===i?.5*D:function(e){return e%360*W}(i),u=2*D/r,s=o+n*V(-c),g=a+n*N(-c),l=0;l<r;l++){if(h=o+n*V(-(c+=u)),d=a+n*N(-c),K(s,g,h,d,e,t,1/0,t)){if(0===z(s,g,e,t,h,d))return X(s,g,e,t,h,d);f++}s=h,g=d}b=0!=f%2}return b},J=function(e,t){return!e||e&&t&&t.i>e.i?t:e};var U=function(){function e(t){Object(i.a)(this,e);this.configure(t)}return Object(n.a)(e,[{key:"configure",value:function(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}},{key:"defaultValidator",value:function(){var e=Math.pow,t=this;return function(o){var a=t.mousePoint;return!!(o&&1>=e((o.x-a.x)/t.xLimit,2)+e((o.y-a.y)/t.yLimit,2))}}},{key:"shapeValidator",value:function(){var e=this;return function(t){var o,a,n,r,i,l,c,s,h,d=e.mousePoint,g=t&&t.shapeInfo,u=!1,f=d.x,b=d.y;return"circle"===(o=g&&g.type)?(n=g.radius,u=B(f,b,t.x,t.y,n)):"arc"===o?(a=g.innerradius,n=g.radius,u=!B(f,b,t.x,t.y,a)&&B(f,b,t.x,t.y,n)):"polygon"===o?(n=g.radius,i=g.startAngle,r=g.sides,u=Y(f,b,t.x,t.y,n,r,i)):"rect"===o||"rectangle"===o?(l=t.x,s=t.y,c=l+(g.width||0),h=s+(g.height||0),u=f>=l&&f<=c&&b>=s&&b<=h):"default"===o&&(u=!1),u}}},{key:"buildKdTree",value:function(e){return this.kdTree=function(e){function t(e,t,o){var a=e[t];e[t]=e[o],e[o]=a}var o,a,n,r=e&&e[0]&&e[0].r||5,i=Math.max,l=Math.floor,c=Math.sqrt,s=Math.min,h=Math.log,d=Math.exp,g=Math.pow;for(a=function(e,o,n,r){for(var g,u,f,b,p,m,v,y,k,O;r>n;){for(600<r-n&&(u=o-n+1,f=h(g=r-n+1),b=.5*d(2*f/3),p=.5*c(f*b*(g-b)/g)*(0>u-g/2?-1:1),m=i(n,l(o-u*b/g+p)),v=s(r,l(o+(g-u)*b/g+p)),a(e,o,m,v)),y=e[o],k=n,O=r,t(e,n,o),e[r].x>y.x&&t(e,n,r);k<O;){for(t(e,k,O),k++,O--;e[k].x<y.x;)k++;for(;e[O].x>y.x;)O--}e[n].x===y.x?t(e,n,O):t(e,++O,r),O<=o&&(n=O+1),o<=O&&(r=O-1)}},n=function(e,o,a,r){for(var g,u,f,b,p,m,v,y,k,O;r>a;){for(600<r-a&&(u=o-a+1,f=h(g=r-a+1),b=.5*d(2*f/3),p=.5*c(f*b*(g-b)/g)*(0>u-g/2?-1:1),m=i(a,l(o-u*b/g+p)),v=s(r,l(o+(g-u)*b/g+p)),n(e,o,m,v)),y=e[o],k=a,O=r,t(e,a,o),e[r].y>y.y&&t(e,a,r);k<O;){for(t(e,k,O),k++,O--;e[k].y<y.y;)k++;for(;e[O].y>y.y;)O--}e[a].y===y.y?t(e,a,O):t(e,++O,r),O<=o&&(a=O+1),o<=O&&(r=O-1)}},o=(e=e||[]).length;o--;)e[o].r>r&&(r=e[o].r),e[o].i=o,e[o].x=+e[o].x,e[o].y=+e[o].y;return{tree:0===e.length?{}:function e(t,o,r,i){var l,c={},s=i?"y":"x";return o===r?(c.point=t[o],c):1==r-o?(t[o][s]>t[r][s]?(c.point=t[o],c.left={point:t[r]}):(c.point=t[r],c.left={point:t[o]}),c):(l=o+r>>1,i?n(t,l,o,r):a(t,l,o,r),c.point=t[l],c.left=e(t,o,l-1,!i),c.right=e(t,l+1,r,!i),c)}(e,0,e.length-1,!1),search:function(e,t,o,a){function n(e,t,o,a){return c(g(e-o,2)+g(t-a,2))}function i(a,r){return"circle"===o?n(a,r,e,t)<=p:a>=p&&a<=m&&r>=v&&r<=y}function l(e,t,o){return e>=t&&e<=o}function s(o){var a=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),r=n(e,t,o.point.x,o.point.y);return d?void(a?k?o.point.i>d.point.i&&(d=o,k=a,O=r):(d=o,k=a,O=r):!k&&r<O&&(d=o,k=a,O=r)):(d=o,k=a,void(O=r))}function h(a,n){"circle"===o?p=a:(p=e-a||0,m=e+a||0,v=t-n||0,y=t+n||0)}var d,u,f,b=this.tree,p=e-r,m=e+r,v=t-r,y=t+r,k=!1,O=0;return a=a||{},f=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&s(e),v<=e.point.y&&u(e.left),y>=e.point.y&&u(e.right))},(u=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&s(e),p<=e.point.x&&f(e.left),m>=e.point.x&&f(e.right))})(b),d&&d.point||d}}}(e),this.tree=this.kdTree.tree,this}},{key:"getNeighbour",value:function(e,t,o){var a=this,n=a.tree,r={x1:e.x-a.xLimit,x2:e.x+a.xLimit,y1:e.y-a.yLimit,y2:e.y+a.yLimit},i=a.validatorFn;return a.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):n?a._searchBtwnLimit(r,n,!0,i):void 0}},{key:"_searchBtwnLimit",value:function(e,t,o,a){var n,r,i=o?"x":"y",l=o?e.x1:e.y1,c=o?e.x2:e.y2;if(void 0!==(n=t&&t.point&&t.point[i]))return a(t.point)&&(r=t.point),n>=l&&t.left&&(r=J(r,this._searchBtwnLimit(e,t.left,!o,a))),n<=c&&t.right&&(r=J(r,this._searchBtwnLimit(e,t.right,!o,a))),r}},{key:"_setSearchLimit",value:function(e,t){this.xLimit=e,this.yLimit=t}}]),e}();U.prototype.constructor=U;var Z=U,q="top",$="bottom",Q="right",ee="left",te="middle",oe="center",ae=window.Math,ne=ae.min,re=ae.max,ie=function(){var e,t,o=this,a=o.markerShape.getElement(),n=o.dataset.getFromEnv("chart"),r=o.markerShape,i=r.getElement(),l=i.data("unfilteredConfig"),c=l._markerEventArgs,s=i.getBBox(),h=o.config;h.link&&(a.node.style.cursor=b.p),i&&l.hovereffect&&("circle"===r.config.type&&(t={color:l.hoverfillcolor,alpha:l.hoverfillalpha,angle:360-l.hoverfillangle,ratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===r.config.rawFillPattern},l._hoverattrs.fill=Object(b.Lb)(t)),e=Object(b.T)({},l._hoverattrs),"image"===i.type&&(delete e.fill,delete e.stroke,delete e["stroke-width"]),i.attr(e)),c||(c=l._markerEventArgs={x:s.x,y:s.y,scaledX:s.x/r.groupConfig.scaleX,scaledY:s.y/r.groupConfig.scaleY,chartX:s.x+s.width/2,chartY:s.y+s.height/2,id:l.id,label:l.label}),Object(f.e)(h.options.id,"markerRollOver",c,n.getFromEnv("chartInstance"),h,void 0,void 0,void 0)},le=function(){var e,t=this,o=t.markerShape.getElement(),a=t.dataset.getFromEnv("chart"),n=t.markerShape,r=n.getElement(),i=t.config,l=r.data("unfilteredConfig");o.node.style.cursor="default",r&&l.hovereffect&&("circle"===n.config.type&&(l._defaultattrs.fill=Object(b.Lb)({alpha:n.config.rawAlpha,color:n.config.rawColor,angle:360-n.config.rawAngle,ratio:n.config.rawRatio,radialGradient:"radial"===n.config.rawFillPattern})),e=Object(b.T)({},l._defaultattrs),"image"===r.type&&(delete e.fill,delete e.stroke,delete e["stroke-width"]),r.attr(e)),Object(f.e)(i.id,"markerRollOut",l._markerEventArgs,a.getFromEnv("chartInstance"),void 0,void 0,void 0)},ce=function(e){var t=this,o=t.markerShape.getElement(),a=t.config.options,n=t.dataset,r=n.getFromEnv("chart"),i=t.markerShape,l=i.config,c=o.getBBox(),s=n.getFromEnv("linkClickFN"),h=i.config.link,d=l._markerEventArgs;h&&s&&s.call({link:h},!0),d||(d=l._markerEventArgs={x:c.x,y:c.y,scaledX:c.x/i.groupConfig.scaleX,scaledY:c.y/i.groupConfig.scaleY,chartX:c.x+c.width/2,chartY:c.y+c.height/2,id:a.id,label:a.label}),r.fireChartInstanceEvent("markerClick",d,e)},se=function(e,t){var o=t?Object(b.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=b.Lb,o},he=function(e,t){var o,a=e&&e.length||!1,n=t||"id",r={};if(!e)return e;for(;a--;)void 0!==(o=e[a])[n]&&(r[o[n].toLowerCase()]=o);return r};Object(y.a)({name:"mapsAnimation",type:"animationRule",extension:O});var de=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).components={},e.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:oe,valign:q}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:Q,valign:te}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:ee,valign:te}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:oe,valign:$}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:oe,valign:te}}},e.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*ne(t,e-t)}},e.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*ne(t,e-t)},bottom:function(e,t){return e-t}},e.hoverFn=ie,e.hoverOutFn=le,e.clickFn=ce,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getName",value:function(){return"markers"}},{key:"getType",value:function(){return"dataset"}},{key:"configureAttributes",value:function(e){if(e){this.JSONData=e;var t=this.getFromEnv("chart").config.markerOpts;this.calculateDataLimits(),t.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}},{key:"calculateMarkerRadiusLimits",value:function(){if(this.JSONData){var e=this,o=e.JSONData,a=e.config,n=e.getFromEnv("chart"),r=n.config.width,i=n.config.height,l=o.markermaxradius,c=o.markerminradius,s=t.getMarkerRadiusLimits(r,i,l,c);a.minRadius=s.min,a.maxRadius=s.max}}},{key:"calculateDataLimits",value:function(){var e,t,o,a,n=this.getFromEnv("chart"),r=this.config,i=(n.jsonData.markers||{}).items||[],l=this.getFromEnv("number-formatter"),c=1/0,s=-1/0;for(a=0,t=i.length;a<t;a++)o=i[a].value,null!==(e=l.getCleanValue(o))&&(c=ne(e,c),s=re(e,s));r.min=c,r.max=s}},{key:"_parseMarkers",value:function(){var e,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=h.jsonData.markers,g=d.items,u=d.shapes,f=h.config.markerOpts,p=this.getFromEnv("number-formatter"),m=s.components.shapeObjs={},v=s.components.markerObjs={};if(g&&g.length){if(u&&u.length)for(o=u.length;o;o-=1)(c=(n=u[o-1]).id.toLowerCase())&&(m[c]=n);for(o=g.length;o--;)(c=(n=g[o]).id&&n.id.toLowerCase())&&(void 0!==(e=n.value)&&""!==e&&(e=parseFloat(e)),(r=(a=t._initializeMarkerItem(c,n,null,h)).config.options.shapeid)&&"string"==typeof r&&(r=r.toLowerCase()),l=(i=a.config).options,i.cleanValue=p.getCleanValue(e),i.formattedValue=null===i.cleanValue?void 0:p.dataLabels(e),i.fillColor=Object(b.yb)(l.fillcolor,l.color,f.fillColor),i.fillAlpha=Object(b.yb)(l.fillalpha,l.alpha,f.fillAlpha),i.fillRatio=Object(b.yb)(l.fillratio,f.fillRatio),i.fillAngle=Object(b.yb)(l.fillangle,f.fillAngle),i.borderThickness=Object(b.Ab)(l.borderthickness,f.borderThickness),i.borderColor=Object(b.yb)(l.bordercolor,f.borderColor),i.borderAlpha=Object(b.yb)(l.borderalpha,f.borderAlpha),i.labelPadding=l.labelpadding||f.labelPadding,a.dataset=s,n.__hideMarker&&(a._isHidden=!0),r&&(a.shapeObj=m[r]),v[c]=a)}}},{key:"defineMarkersNShapes",value:function(){var e,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=h.jsonData.markers,g=d.definition,u=this.getFromEnv("number-formatter"),f=h.config.markerOpts,p=he(g)||{},m=he(d.application)||{},v=d.shapes,y=s.components.shapeObjs=s.components.shapeObjs||(s.components.shapeObjs={}),k=s.components.markerObjs=s.components.markerObjs||(s.components.markerObjs={});if(g&&g.length){if(v&&v.length)for(n=v.length;n;n-=1)(c=(i=v[n-1]).id.toLowerCase())&&(y[c]=i);for(c in p)i=p[c],(r=k[c]=t._initializeMarkerItem(c,i,m[c],h)).dataset=s,l=r.config.options.shapeid,o=r.config,a=i.value,o.cleanValue=u.getCleanValue(a),e=o.options,o.formattedValue=null===o.cleanValue?void 0:u.dataLabels(a),o.fillColor=Object(b.yb)(e.fillcolor,e.color,f.fillColor),o.fillAlpha=Object(b.yb)(e.fillalpha,e.alpha,f.fillAlpha),o.fillRatio=Object(b.yb)(e.fillratio,f.fillRatio),o.fillAngle=Object(b.yb)(e.fillangle,f.fillAngle),o.borderThickness=Object(b.Ab)(e.borderthickness,f.borderThickness),o.borderColor=Object(b.yb)(e.bordercolor,f.borderColor),o.borderAlpha=Object(b.yb)(e.borderalpha,f.borderAlpha),o.labelPadding=e.labelpadding||f.labelPadding,o.options.tooltext=Object(b.yb)(e.tooltext,f.tooltext),o.link=e.link,l&&(r.shapeObj=y[l.toLowerCase()])}}},{key:"getDataLimits",value:function(){var e=this.config;return{min:e.min,max:e.max}}},{key:"configureConnectors",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u,f=this,p=f.getFromEnv("chart"),m=p.jsonData,v=f.components,y=m.markers||{},k=y.connector||y.connectors||[],O=v.markerObjs,C=k.length,x=f.components.connectors,j=function(e){return function(t){var o=this.getElement(),a=o.data("unfilteredConfig");o&&a.hoverEffect&&o.attr(a._hoverAttrs),p.fireChartInstanceEvent("connectorrollover",e,t)}},A=function(e){return function(t){var o=this.getElement(),a=o.data("unfilteredConfig");o&&a.hoverEffect&&o.attr(a._defaultAttrs),p.fireChartInstanceEvent("connectorrollout",e,t)}},w=function(e){return function(t){p.fireChartInstanceEvent("connectorClick",e,t)}},F=p.config.connectorOpts,L={};for(x=f.components.connectors=[],u=0;u<C;u++)((g=k[u]).from||g.to)&&(t=O[g.from.toLowerCase()],o=O[g.to.toLowerCase()],t&&o)&&(a=k[u].label,(L=x[u])||(L=x[u]={}),L.config||(e=L.config={}),L.graphics||(L.graphics={}),(e=L.config=Object(b.T)({},g)).fromMarker=t,e.toMarker=o,e.link=g.link,e.showTooltip=Object(b.Ab)(g.showtooltip,F.showTooltip),n=e.tooltext=e.showTooltip?Object(b.yb)(g.tooltext,F.tooltext):"",r=e.thickness=Object(b.yb)(g.thickness,F.thickness),i=e.color=Object(b.yb)(g.color,F.color),l=e.alpha=Object(b.yb)(g.alpha,F.alpha),e.hoverEffect=Object(b.Ab)(g.showhovereffect,F.showHoverEffect),c=Object(b.yb)(g.hovercolor,F.hoverColor,i),s=Object(b.yb)(g.hoveralpha,F.hoverAlpha,l),h=Object(b.yb)(g.hoverthickness,F.hoverThickness,r),e.dashed=Object(b.yb)(g.dashed,F.dashed),e.dashLen=Object(b.Ab)(g.dashlen,F.dashlen),e.dashGap=Object(b.Ab)(g.dashgap,F.dashgap),n&&(e.tooltext=n=Object(b.wb)(Object(b.vb)(n,[3,40,41,42,43],{label:a,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:a},e._hoverAttrs={stroke:se({color:c,alpha:s}).toString(),"stroke-width":h},e._defaultAttrs={stroke:se({color:i,alpha:l}).toString(),"stroke-width":r},e.type="line",e.onclick=w(e.eventArgs),e.onmouseover=j(e.eventArgs),e.onmouseout=A(e.eventArgs),a&&(!(d=L.labelConfig)&&(d=L.labelConfig={}),d.type="text",d.text=a,d.align=oe,d.valign=te,d.font=F.font,d.fillcolor=F.fontColor,d.bgcolor=F.labelBgColor,d.bordercolor=F.labelBorderColor,d.tooltext=e.tooltext))}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=s.config,g=h.getChildren("mapAnnotations")[0],u=s.components.markerObjs,f=h.config,b=f.markerOpts,p=f.scalingParams,m=h.config.annotationConfig,v=s.getFromEnv("toolTipController"),y=h.getDatasets()[0],k=[],O=[],x={};for(n in this._drawConnectors(),s.imageLoadCount=0,s.imageCount=0,c=g.addGroup(Object.assign(m,{id:"markers",fillalpha:"100",items:k,scaleimages:1}),s),l=g.addGroup(Object.assign(m,{id:"markerLabels",items:O,scaleimages:1}),s),f.labelsOnTop&&y.getChildren("mapLabelAnnotations")&&y.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),s.components.markerGroup=c,s.components.markerLabelGroup=l,d.autoScale=b.autoScale?p.sFactor:1,u)e=null,(a=(t=u[n]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(a._annotationIndex=k.length,x[n]=t,e.markerShape&&(o=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),t.markerShape=g.addItem(c.getId(),o,!0,s)),(r=t.markerShape&&t.markerShape.getElement())&&(v.enableToolTip(r,t.config.tooltext),r.data("unfilteredConfig",o)),k.push(t.markerShape),e.markerLabel&&(o=Object.assign({animationLabel:"markerItem"},e.markerLabel),t.markerLabel=g.addItem(l.getId(),o,!0,s),(i=t.markerLabel&&t.markerLabel.getElement())&&i.data("unfilteredConfig",o)),O.push(t.markerLabel));s.addJob("buildKdtree",s._buildKdTree.bind(s),C.b.kdTree)}},{key:"_buildKdTree",value:function(){var e,t,o=this,a=o.components.kdArrayMap,n=o.components.markerGroup,r=[],i=n&&n.items,l=i&&i.length||0;for(t=0;t<l;t++)a[e=i[t].config.id]&&r.push(a[e]);o.components.kDTree||(o.components.kDTree=new Z(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(r)}},{key:"_drawMarkerItem",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u,f,m,v,y,k,O,C=this,x=C.dataset,j=x.getFromEnv("chart"),A=j.config,w=x.config,F=A.scalingParams,L=C.config,E=L.options,S=L.definition,_=A.markerOpts,T=_.dataLabels.style,I=E.shapeid,P=E.scale||1,R=E.label||"",M=j.config.scalingParams.scaleFactor*j.config.baseScaleFactor,B=(E.labelpos||q).toLowerCase(),D=void 0===L.formattedValue?void 0:L.formattedValue,V=E.tooltext||_.tooltext,N=Object(b.Ab)(S.radius,L.radius,_.radius)*P*w.autoScale||1e-4,G=L.fillColor,H=L.fillAlpha,W=L.fillRatio,z=L.fillAngle,X=L.borderThickness,K=L.borderColor,Y=L.borderAlpha,J=x.components.kdArrayMap||(x.components.kdArrayMap={}),U=C.config.id;if(L.autoScale=_.autoScale?M:1,I)return V=V?Object(b.wb)(Object(b.vb)(V,[1,2,3],{formattedValue:D,label:R},E)):D?R+_.tooltipSepChar+D:R,void 0!==D&&null!==D?R=R+_.labelSepChar+D:isNaN(P)?P=1:0>P?P=0:5<P&&(P=5),Object(b.T)(E,{x:E.x&&E.x.toString(),y:E.y&&E.y.toString(),fillcolor:G,fillalpha:H,fillratio:W,fillangle:z,borderthickness:X,bordercolor:K,borderalpha:Y,hovereffect:Object(b.yb)(_.showHoverEffect),radius:N&&N.toString(),link:E.link,showshadow:Object(b.Ab)(E.showshadow,L.shadow),_markerLabel:R,_markerId:E.id,id:(E.id+"").toLowerCase()}),delete E.tooltext,L.tooltext=!!_.showTooltip&&V,f=+E.x*F.sFactor+F.translateX,m=+E.y*F.sFactor+F.translateY,N=E.radius,"triangle"===I?(Object(b.T)(E,{type:"polygon",sides:3,startangle:_.startAngle}),O="polygon",k=3):"diamond"===I?(Object(b.T)(E,{type:"polygon",sides:4,startangle:_.startAngle}),O="polygon",k=4):"arc"===I?(y=.6*N,Object(b.T)(E,{type:"arc",startangle:0,endangle:360,innerradius:y}),O="arc"):"circle"===I?(E.type="circle",O="circle"):(h=x.getShapeArgs.call(C),_.dataEnabled&&_.valueToRadius&&void 0!==E.radius?delete h.radius:(!h.radius&&(h.radius=_.radius),h.radius*=P*L.autoScale),Object(b.T)(E,h),E.id=E._markerId&&E._markerId.toLowerCase(),y=h.innerradius,h.radius&&(N=h.radius),O=h.type&&h.type.toLowerCase(),k=h.sides,(N=+N)&&y&&N<y&&(u=N,E.radius=N=y,E.innerradius=y=u)),E.type=E.type&&E.type.toLowerCase(),Object(b.T)(E,{hoverfillcolor:Object(b.yb)(E.fillhovercolor,_.hoverFillColor,E.fillcolor),hoverfillalpha:Object(b.yb)(E.fillhoveralpha,_.hoverFillAlpha,E.fillalpha),hoverfillratio:Object(b.yb)(E.fillhoverratio,_.hoverFillRatio,E.fillratio),hoverfillangle:Object(b.yb)(E.fillhoverangle,_.hoverFillAngle,E.fillangle),hoverborderthickness:Object(b.Ab)(E.borderhoverthickness,_.hoverBorderThickness,E.borderthickness),hoverbordercolor:Object(b.yb)(E.borderhovercolor,_.hoverBorderColor,E.bordercolor),hoverborderalpha:Object(b.yb)(E.borderhoveralpha,_.hoverBorderAlpha,E.borderalpha)}),d={alpha:E.fillalpha,color:E.fillcolor,angle:360-E.fillangle,ratio:E.fillratio},g={alpha:E.hoverfillalpha,color:E.hoverfillcolor,angle:360-E.hoverfillangle,ratio:E.hoverfillratio},E._defaultattrs={fill:Object(b.Lb)(d),"stroke-width":"0"===E.showborder?0:E.borderthickness,stroke:Object(p.c)(E.bordercolor,E.borderalpha)},E._hoverattrs={fill:Object(b.Lb)(g),"stroke-width":"0"===E.showborder?0:E.hoverborderthickness,stroke:Object(p.c)(E.hoverbordercolor,E.hoverborderalpha)},"image"===E.type?(E.borderthickness=E.borderthickness||0,E.onload=function(e){var t=this.config,o=e.width,a=e.height,n={},r=(+t.x-o/(2*F.sFactor))*F.sFactor,i=(+t.y-a/(2*F.sFactor))*F.sFactor;(n=J[U]||(J[U]={})).x=r+F.translateX,n.y=i+F.translateY,n.element=C,n.shapeInfo={type:"rect",width:o,height:a},o&&a&&this.getElement().attr({x:r,y:i,width:o,height:a}),x.imageLoadCount++,x.imageLoadCount===x.imageCount&&x._buildKdTree()},E.onerror=function(){x.imageLoadCount++,x.imageLoadCount===x.imageCount&&x._buildKdTree()},x.imageCount++):((v=J[U]||(J[U]={})).x=f,v.y=m,v.element=C,v.shapeInfo={type:O,sides:k,radius:+N+E.borderthickness/2,innerradius:y}),L.drawOptions.shape=E,_.showLabels?(s=E.labelpadding||_.labelPadding,t=(e=x._getLabelOptions(B,s,E)).align,o=e.valign,a=L._labelBaseWidth,n=L._labelBaseHeight,r=L._labelXOffset,i=L._labelYOffset,(l=_.labelWrapWidth?_.labelWrapWidth:x.getWrapWidth[t](a,+e.x+r))>s&&(l-=s),(c=_.labelWrapHeight?_.labelWrapHeight:x.getWrapHeight[o](n,+e.y+i))>s&&(c-=s),L.drawOptions.label=Object(b.T)({type:"text"},{text:R,tooltext:E.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:l,wrapheight:c,fontsize:T.fontSize/F.sFactor,font:T.fontFamily,fillcolor:T.fontColor}),{markerShape:E,markerLabel:L.drawOptions.label}):{markerShape:E}}},{key:"highlightPoint",value:function(e,t){var o=e.element,a=this,n=t.originalEvent,r=a.getFromEnv("chart"),i=a.getFromEnv("toolTipController"),l=a.config.currentToolTip,c=r.config.lastHoveredPoint;c&&c!==e&&(c&&a.hoverOutFn.call(c.element),r.config.lastHoveredPoint=null,i.hide(l)),!1===e||("click"===t.type||"touchstart"===t.type?(r.config.lastHoveredPoint!==e&&a.hoverFn.call(o),a.clickFn.call(o,t)):"mousemove"===t.type&&r.config.lastHoveredPoint!==e&&a.hoverFn.call(o),o.config.tooltext&&(l?i.draw(n,o.config.tooltext,l):l=a.config.currentToolTip=i.draw(n,o.config.tooltext)),r.config.lastHoveredPoint=e)}},{key:"_drawConnectors",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g=this,u=g.getFromEnv("chart"),f=u.config.annotationConfig,b=g.components.connectors||(g.components.connectors=[]),p=b.length,m=u.config.scalingParams,v=u.config.connectorOpts,y=v.showLabels,k=u.getChildren("mapAnnotations")[0],O=[],C=[],x=[];for(x.push({id:"connectorLabels",fillalpha:"100",items:C}),x.push({id:"connectors",fillalpha:"100",items:O}),k.addGroup(Object.assign(f,x[1]),g),k.addGroup(Object.assign(f,x[0]),g),o=0;o<p;o++)b[o]&&(s=b[o].config.fromMarker.config,h=b[o].config.toMarker.config,r=s.options.x,i=s.options.y,l=h.options.x,c=h.options.y,b[o].config.x=r,b[o].config.y=i,b[o].config.tox=l,b[o].config.toy=c,O.push(b[o].config),d=Object.assign({animationLabel:"markerItem"},b[o].config),(a=(e=k.addItem("connectors",d,!0,g)).getElement())&&a.data("unfilteredConfig",d),e.addEventListener("fc-mouseover",b[o].config.onmouseover),e.addEventListener("fc-mouseout",b[o].config.onmouseout),e.addEventListener("fc-click",b[o].config.onclick),b[o].labelConfig&&y&&(b[o].labelConfig.x=((+r+ +l)/2).toString(),b[o].labelConfig.y=((+i+ +c)/2).toString(),b[o].labelConfig.fontsize=v.fontSize/(m.scaleFactor*u.config.baseScaleFactor),C.push(b[o].labelConfig),d=Object.assign({animationLabel:"markerItem"},b[o].labelConfig),(n=(t=k.addItem("connectorLabels",d,!0,g))&&t.getElement())&&n.data("unfilteredConfig")))}},{key:"getShapeArgs",value:function(){var e,t=this.config,o=Object(b.T)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(e=(o.radius||t.markerRadius)*t.autoScale,o.radius=e,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||.6*e),o):null}},{key:"_getLabelOptions",value:function(e,t,o,a,n){var r,i,l,c=e&&e.toLowerCase();return this.getLabelAlignment[c]||(c="center"),i=+o.x,l=+o.y,r=+(r=void 0===a||void 0===n?o.radius||0:/^(top|bottom)$/gi.test(c)&&.5*n||/^(left|right)$/gi.test(c)&&.5*a||0)+ +t,this.getLabelAlignment[c](i,l,r)}},{key:"addMarkerItem",value:function(e){var o,a,n,r,i,l,c,s,h,d=this,g=d.getFromEnv("chart"),u=e,f=d.components.markerObjs,p=d.components.shapeObjs,m=d.components.markerGroup,v=d.components.markerLabelGroup,y=g.getChildren("mapAnnotations")[0],k=d.getFromEnv("number-formatter"),O=g.config.markerOpts;if(h=u.id.toLowerCase()){if(f[h])return;delete u.value,d.imageLoadCount=0,(o=t._initializeMarkerItem(h,u,null)).dataset=d,s=o.config.options.shapeid,i=o.config,c=u.value,i.cleanValue=k.getCleanValue(c),e=i.options,i.formattedValue=null===i.cleanValue?void 0:k.dataLabels(c),i.fillColor=Object(b.yb)(e.fillcolor,e.color,O.fillColor),i.fillAlpha=Object(b.yb)(e.fillalpha,e.alpha,O.fillAlpha),i.fillRatio=Object(b.yb)(e.fillratio,O.fillRatio),i.fillAngle=Object(b.yb)(e.fillangle,O.fillAngle),i.borderThickness=Object(b.Ab)(e.borderthickness,O.borderThickness),i.borderColor=Object(b.yb)(e.bordercolor,O.borderColor),i.borderAlpha=Object(b.yb)(e.borderalpha,O.borderAlpha),i.labelPadding=e.labelpadding||O.labelPadding,i.options.tooltext=Object(b.yb)(e.tooltext,O.tooltext),i.link=e.link,s&&(o.shapeObj=p[s&&s.toLowerCase()]),f[h]=o,r=d._drawMarkerItem.call(o),m&&v&&(r.markerShape&&(l=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},r.markerShape),o.markerShape=y.addItem(m.getId(),l,!0,d),(a=o.markerShape&&o.markerShape.getElement())&&a.data("unfilteredConfig",l)),r.markerLabel&&(l=Object.assign({animationLabel:"markerItem"},r.markerLabel),o.markerLabel=y.addItem(v.getId(),l,!0,d),(n=o.markerLabel&&o.markerLabel.getElement())&&n.data("unfilteredConfig",l))),d._buildKdTree()}}},{key:"updateMarkerItem",value:function(e,t){var o,a,n,r,i=this,l=i.getFromEnv("chart"),c=l.getChildren("mapAnnotations")[0],s=i.components.markerObjs,h=l.config.markerOpts,d={},g=s[e];if(g){for(a in o=g.config.options,Object(b.T)(o,t),i.imageLoadCount=0,n=g.config,t)d[a.toLowerCase()]=t[a]&&t[a].toString();n.fillColor=Object(b.yb)(d.fillcolor,d.color,h.fillColor),n.fillAlpha=Object(b.yb)(d.fillalpha,d.alpha,h.fillAlpha),n.fillRatio=Object(b.yb)(d.fillratio,h.fillRatio),n.fillAngle=Object(b.yb)(d.fillangle,h.fillAngle),n.borderThickness=Object(b.Ab)(d.borderthickness,h.borderThickness),n.borderColor=Object(b.yb)(d.bordercolor,h.borderColor),n.borderAlpha=Object(b.yb)(d.borderalpha,h.borderAlpha),n.labelPadding=d.labelpadding||h.labelPadding,n.options.tooltext=Object(b.yb)(d.tooltext,h.tooltext),n.link=d.link,r=i._drawMarkerItem.call(g).markerShape,i._buildKdTree(),c.update(e,r)}}},{key:"_removeMarkerItem",value:function(e){var t,o,a=this.components,n=a.markerObjs,r=n[e],i=a.kdArrayMap;r&&(t=r.markerShape,o=r.markerLabel,t&&t.dispose(),o&&o.dispose(),delete i[e],this._buildKdTree()),delete n[e]}},{key:"getElement",value:function(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}],[{key:"getMarkerRadiusLimits",value:function(e,t,o,a){var n=ne(e,t);return a=parseFloat(a),o=parseFloat(o),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?{min:.02*n,max:.07*n}:{min:parseInt(o/10,10),max:o}:{min:a,max:10*a}:a<o?{min:a,max:o}:{min:o,max:a}}},{key:"_initializeMarkerItem",value:function(e,t,o){var a,n={},r=n.config;return r||(r=n.config={}),r.id=e,r.definition=t,r.application=o,r.hasValue=null,r.value=null,r.options=null,r.label=null,r.markerShape=null,r.markerLabel=null,r.drawOptions={shape:null,label:null},r.drawComplete=!1,a=n.config.options=Object(b.T)({},r.definition),r.dataEnabled?!isNaN(a.value)&&""!==a.value&&(n.value=parseFloat(a.value),n.hasValue=!0):r.applyAll?r.options=Object(b.T)(a,r.application):o&&(r.options=Object(b.T)(a,r.application)),n}}]),t}(M);Object(y.a)({name:"mapsAnimation",type:"animationRule",extension:O});var ge=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"group"}},{key:"getName",value:function(){return"mapGroup"}},{key:"configure",value:function(){this._mapChildren(function(e){e.configure&&e.configure()})}},{key:"createContainer",value:function(){var e,t=this,o=t.getLinkedParent(),a=t.getFromEnv("animationManager");e=o.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",a.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",a.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}},{key:"_transformGroup",value:function(){var e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),a=e.getFromEnv("animationManager"),n=t.jsonData,r=e.getChildContainer("plot"),i=e.getChildContainer("plotShadow"),l=t.config.scalingParams;r.hide(),i.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),b.ib&&(o.args.link&&o.args.clickedEntityBox&&n.chart.linkedcharttransition,r&&a.setAnimation({el:r,attr:{transform:l.transformStr},component:e,label:"group"}),i&&a.setAnimation({el:i,attr:{transform:l.transformStr},component:e,label:"group"})),r.show(),i.show()}),t.checkComplete()}},{key:"draw",value:function(){this.createContainer(),this._transformGroup()}},{key:"getDataLimits",value:function(e){var t,o=this,a=1/0,n=-1/0,r=0,i=function(e){n=Math.max(n,e.max),a=Math.min(a,e.min)};return o._mapChildren(function(o){return o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),i(t))):(r++,t=o.getDataLimits(e),void i(t))}),r?o.setState("visible",!0):o.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:n,min:a}}}]),t}(d.a),ue=function(e){var t,o=e.getFromEnv("dataSource"),a=o.data||{},n=o.markers;Object(b.M)(e,ge,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(b.Q)(t,M,"entities",1,[a]),n?Object(b.Q)(t,de,"markers",1,[n]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},fe=o(391),be=o(17),pe=function(e){function t(){var e;Object(i.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this));var o=Object(be.a)(Object(be.a)(e));return o.mapByCategory=!1,o.colorArr=[],o.noValidRange=!0,o.sortLegend=!1,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"__setDefaultConfig",value:function(){Object(r.a)(Object(c.a)(t.prototype),"__setDefaultConfig",this).call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}},{key:"getType",value:function(){return"colorComponent"}},{key:"getName",value:function(){return"colorBucket"}},{key:"configure",value:function(e){if(e){var t,o,a,n,r,i,l,c,s,h,d,g=this,u=g.mapByCategory,f=e.numberFormatter,p=e.colorRange||{},m=Object(b.T)([],p.color),v=this.getLinkedParent(),y=g.getFromEnv("dataSource"),k=Math.min(Math.max(Object(b.Ab)(y.chart.palette,0)-1,0),4),O=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[k],C=Object(b.Ab)(f.getCleanValue(p.maxvalue),1/0),x=Object(b.Ab)(f.getCleanValue(p.minvalue),-1/0),j=g.colorArr;if(void 0!==e.mapByCategory&&(u=g.mapByCategory=!!+e.mapByCategory),(m=u?m.filter(function(e){return e.code||e.color}):m.filter(function(e){return e.minvalue||e.maxvalue})).forEach(function(e){e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(h=f.getCleanValue(e.minvalue),s=f.getCleanValue(e.maxvalue),e.rangeLabel=f.dataLabels(h)+"-"+f.dataLabels(s)):(h=f.getCleanValue(e.minvalue),e.maxvalue=s=C,e.rangeLabel=s===1/0?">"+f.dataLabels(h):f.dataLabels(h)+"-"+f.dataLabels(s)):(e.minvalue=h=x,s=f.getCleanValue(e.maxvalue),e.rangeLabel=h===-1/0?"<"+f.dataLabels(s):f.dataLabels(h)+"-"+f.dataLabels(s))}),m.sort(function(e,t){return+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue}),m&&(t=m.length)){for(j.length=0,o=0;o<t;o+=1)l=m[o],a=Object(b.yb)(l.color,l.code,O&&O[o]),n=Object(b.yb)(l.alpha),i=Object(b.yb)(l.bordercolor),r=Object(b.yb)(l.borderalpha,100),s=Object(b.Ab)(l.maxvalue),h=Object(b.Ab)(l.minvalue),d=Object(b.yb)(l.label,l.displayvalue,l.rangeLabel),(a&&s>=h||u&&d)&&j.push({code:a,alpha:n||"100",oriAlpha:n,maxvalue:s,minvalue:h,label:Object(b.wb)(d),labelId:d.toLowerCase(),bordercolor:i,borderAlpha:r,name:l.name});g.sortedColorArr=g.colorArr.slice(0)}else g.noValidRange=!0,g.colorArr=[],g.sortedColorArr=[]}}},{key:"getColorObj",value:function(e){if(void 0===e)return{outOfRange:!0};var t,o,a=this,n=a.sortedColorArr,r=a.gradient?1:0,i=n[r];if(a.mapByCategory){for(e=Object(b.wb)(e).toLowerCase()||e.toString().toLowerCase();i;){if(i.labelId===e||i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,legendItemId:i.legendItemId};i=n[r+=1]}return{outOfRange:!0}}if(a.gradient){if(a.scaleMin<=e&&a.scaleMax>=e){for(;i&&i.maxvalue<e;)i=n[r+=1];return o=(e-i.minvalue)/i.range,{code:function(e,t,o){var a=e[0],n=e[1],r=e[2],i=a+(t[0]-a)*o,l=n+(t[1]-n)*o,c=r+(t[2]-r)*o;return{hex:("#000000"+(i<<16|l<<8|c).toString(16)).slice(-6),rgb:[i,l,c]}}(n[r-1].codeRGB,i.codeRGB,o).hex}}return{outOfRange:!0}}for(;i;){if(e<i.minvalue&&!t)return 0==r?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}:{code:n[r-1].code,alpha:n[r-1].alpha||"100",oriAlpha:n[r-1].oriAlpha,seriesIndex:r,name:n[r-1].name,label:n[r-1].label,outOfRange:!0,bordercolor:n[r-1].bordercolor,borderalpha:n[r-1].borderAlpha};if(e>i.maxvalue&&r==n.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(i.maxvalue>e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(e===i.maxvalue&&(t={code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}),r==n.length-1&&t)return t;i=n[r+=1]}return n.length?void 0:{outOfRange:!0}}},{key:"getColorRangeArr",value:function(e,t){var o,a,n,r,i,l,c,s,h=this.colorArr,d=[];if(!this.defaultAsigned&&(e>t&&(o=e,e=t,t=o),e<t&&(r=this.getColorObj(e),l=this.getColorObj(t),r&&l))){for(i=e,a=r.seriesIndex,n=l.seriesIndex;a<=n;a+=1)(c=Object(b.T)({},h[a])).minvalue!==i&&(c.minvalue=i),d.push(c),s=c,i=c.maxvalue;s&&(s.maxvalue=t)}return d}}]),t}(d.a),me=function(e,t,o){var a,n,r=Math.round,i=e.value,l=e.code,c=Object(p.a)(l),s=t.value,h=t.code,d=Object(p.a)(h);return a=s-i,n=[r(c[0]+(d[0]-c[0])/a*(o-i)),r(c[1]+(d[1]-c[1])/a*(o-i)),r(c[2]+(d[2]-c[2])/a*(o-i))],Object(p.b)(n)},ve=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).colorRange={},e.valueRatio={},e.data={},e.mapByPercent=void 0,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"colorComponent"}},{key:"getName",value:function(){return"gradientColorRange"}},{key:"configure",value:function(e){if(e){var t,o,a,n=this;for(n.data=e,n.appender="",a=n.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),n.valueRatio=void 0,n.values=[],t=0,o=a.length;t<o;t++)n.values.push(a[t].value)}}},{key:"getValueRatio",value:function(){var e,t,o=this.colorRange,a=o.length,n=this.valueRatio,r=o[a-1].value,i=o[0].value,l=0;if(n)return n;for(n=this.valueRatio=[],e=0;e<a;e++)t=(o[e].value-i)/(r-i),n.push(100*(t-l)),l=t;return n}},{key:"getCumulativeValueRatio",value:function(){var e,t,o=this.colorRange,a=o.length,n=o[0].value,r=o[a-1].value,i=[];for(t=0;t<a;t++)e=o[t],i.push((e.value-n)/(r-n)*100);return i}},{key:"getBoxFill",value:function(e){var t,o,a,n,r=this.colorRange,i=r.length,l=[];for(n=e?90:0,o=0;o<i;o++)t=r[o],l.push(t.code);return a={FCcolor:{alpha:"100,100,100",angle:n,color:l.join(","),ratio:this.getValueRatio().join(",")}},Object(b.Lb)(a)}},{key:"getColorByValue",value:function(e){var t,o,a,n,r=this.values,i=this.colorRange;if(void 0!==e&&null!==e){for(o=0,t=r.length;o<t;o++){if(e===r[o]){n=i[o].code;break}if(!o&&e<r[o]){a=!0;break}if(o===t-1&&e>r[o]){a=!0;break}if(e>r[o]&&e<r[o+1]){n=me(i[o],i[o+1],e);break}}return a?void 0:n}}}]),t}(d.a);function ye(e){return Object(p.j)(e||Oe)||Oe}var ke="rgba(192,192,192,"+(b.ob?.002:1e-6)+")",Oe="#000000",Ce=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(b.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:ke,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:ke,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var a,n,r,i,l,c,s,h,d,g,u,f,m=Math.max,v=Math.min,y={},k=e.getFromEnv("number-formatter"),O=e.getFromEnv("dataSource"),C=O.dataset,x=O.data;if(o=o||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==o.min&&void 0!==o.max?"HeatMap"===e.getName()&&(void 0===o.min||void 0===o.max)&&(o={min:1/0,max:-1/0},C.forEach(function(e){e.data&&e.data.forEach(function(e){o.min=v(o.min,Object(b.Ab)(e.value,o.min)),o.max=m(o.max,Object(b.Ab)(e.value,o.max))})})):(o={min:1/0,max:-1/0},x&&x.forEach(function(e){o.min=v(o.min,Object(b.Ab)(e.value,o.min)),o.max=m(o.max,Object(b.Ab)(e.value,o.min))})),y.mapByPercent=u=!!Object(b.Ab)(t.mapbypercent,0),a=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===o.min?0:u?0:o.min),void 0===t.maxvalue&&(t.maxvalue=void 0===o.max?100:u?100:o.max),(t.maxvalue===t.minvalue||o.min===1/0||o.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),f=!1,l=0,s=a.length;l<s;l++)if(a[l].maxvalue){f=!0;break}for(f||(a=[]),r=t.code,h=y.colorRange=[],y.gradient=!!Object(b.Ab)(t.gradient,1),a.length?r=ye(r):(r?(i=ye(r),r=ye()):i=function(e){return Object(p.h)(e,1)}(r=ye()),a.push({code:i,maxvalue:t.maxvalue,label:void 0})),function(t){var o,a,n,r=e.getFromEnv("number-formatter");for(o=0,a=t.length;o<a;o++)(n=t[o].maxvalue)&&(t[o].maxvalue=r.getCleanValue(n))}(a),a=a.sort(function(e,t){return e.maxvalue-t.maxvalue}),d=g=t.minvalue&&k.getCleanValue(t.minvalue),g=(void 0!==d||null!==d)&&(u?d+"%":k.legendValue(d)),h.push({code:Object(b.R)(r),value:d,displayValue:g,label:t.startlabel}),l=0,s=a.length;l<s;l++)c=ye((n=a[l]).code||n.color),d=g=n.maxvalue,!isNaN(parseInt(d,10))&&(g=(void 0!==d||null!==d)&&(u?d+"%":k.legendValue(d)),h.push({code:Object(b.R)(c),value:d,displayValue:g,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,y},getDefaultConf:function(e){return t[e]}}}(),xe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).datasource={},e.config.legendItemIds=[],e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"configure",value:function(){var e,t,o,a=this,n=this.getFromEnv("chart"),r="maps"===n.defaultDatasetType,i="TreeMap"===n.getName(),l=this.getFromEnv("dataSource").chart.mapbycategory,c=n.getFromEnv("number-formatter"),s=n.config.showLegend,h=n.getChildren("colorRange")&&n.getChildren("colorRange")[0];n.addToEnv("colorManager",a),a.datasource=n.getFromEnv("dataSource"),e=a.datasource.colorrange,h&&h.remove({instant:!0}),s||(a.config.legendItemIds=[]),"gradient"===(t=r?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":i?"gradient":e.gradient&&"0"!=e.gradient&&!+l?"gradient":"icon")?(Ce.init({chart:n}),o=Ce.legacyDataParser(e),Object(b.M)(n,ve,"colorRange",1,[o]),h=n.getChildren("colorRange")[0],n.addToEnv("colorRange",h),o||(h._dontPlot=!0),a.config.legendItemIds=[],a._configureGradientLegend(h)):"icon"===t?(Object(b.M)(n,pe,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(b.Ab)(l,0),defaultColor:"cccccc",numberFormatter:c}]),n.addToEnv("colorRange",n.getChildren("colorRange")[0]),s&&a._addLegendItems()):"none"===t&&(n.deleteFromEnv("colorManager"),a.config.legendItemIds=[])}},{key:"_configureGradientLegend",value:function(e){var t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},o))}},{key:"_addLegendItems",value:function(){var e,t,o,a,n,r=this,i=r.config,l=r.getFromEnv("chart"),c=l.getChildren("legend")[0],s=l.getFromEnv("colorRange").colorArr,h=s.length;for(a=0;a<h;a++)n={label:Object(b.yb)(s[a].label,s[a].displayvalue),datasetObj:s[a],index:a},t=Object(p.h)(s[a].code,40),e={FCcolor:{color:s[a].code+","+s[a].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=c.getItem(i.legendItemIds[a]))||(i.legendItemIds.push(c.createItem(r)),(o=c.getItem(i.legendItemIds[a])).addEventListener("fc-click",o.itemClickFn)),o.removeLegendState("hidden"),s[a].legendItemId=o&&o.getId(),o.configure(n),o.setStateCosmetics("default",{symbol:{fill:Object(b.Lb)(e),rawFillColor:s[a].code}});for(a=h;a<i.legendItemIds.length;a++)c.disposeItem(i.legendItemIds[a]);i.legendItemIds.splice(h)}},{key:"legendInteractivity",value:function(e){var t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}},{key:"getColor",value:function(e){var t=this,o=t.datasource.colorrange;return!+t.datasource.chart.mapbycategory&&+o.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}},{key:"getValueRatio",value:function(){return this.getFromEnv("colorRange").getValueRatio()}},{key:"getCumulativeValueRatio",value:function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}},{key:"getBoxFill",value:function(e){return this.getFromEnv("colorRange").getBoxFill(e)}},{key:"getColorByValue",value:function(e){return this.getFromEnv("colorRange").getColorByValue(e)}},{key:"getColorObj",value:function(e){return this.getFromEnv("colorRange").getColorObj(e)}}]),t}(d.a);var je,Ae,we,Fe=function(e){!function(e){var t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new xe,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)},Le={},Ee="rgba(192,192,192,"+(b.ob?.002:1e-6)+")",Se=!1,_e=!0,Te="#000000",Ie={}.hasOwnProperty;function Pe(e,t){return function e(t,o){var a,n;for(n in t)Ie.call(t,n)&&(a=t[n],o[n]===je?o[n]=a:"object"==typeof a&&null!==a&&e(a,o[n]))}(e,t),t}function Re(e){return Object(p.j)(e||Te)||Te}function Me(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Be(e){return!(e!==je&&"undefined"!=typeof e&&null!==e&&!isNaN(e))}Le.CAPTION="CAPTION",Le.LEGEND_BODY="LEGEND_BODY",Le.AXIS_LABEL="LEGEND_LABEL",Le.LEGEND_AXIS="LEGEND_AXIS",Le.RANGE="RANGE",Le.AXIS_VALUE="AXIS_VALUE",Ae=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(b.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Ee,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Ee,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var a,n,r,i,l,c,s,h,d,g,u,f,m={},v=e.getFromEnv("number-formatter");if(!t)return!1;for(m.mapByPercent=u=!!Object(b.Ab)(t.mapbypercent,0),a=t.color||[],t.minvalue===je&&(t.minvalue=o.min===je?0:u?0:o.min),t.maxvalue===je&&(t.maxvalue=o.max===je?100:u?100:o.max),f=!1,l=0,s=a.length;l<s;l++)if(a[l].maxvalue){f=!0;break}for(f||(a=[]),r=t.code,h=m.colorRange=[],m.gradient=!!Object(b.Ab)(t.gradient,1),a.length?r=Re(r):(r?(i=Re(r),r=Re()):i=function(e){return Object(p.h)(e,1)}(r=Re()),a.push({code:i,maxvalue:t.maxvalue,label:je})),function(t){var o,a,n,r=e.getFromEnv("number-formatter");for(o=0,a=t.length;o<a;o++)(n=t[o].maxvalue)&&(t[o].maxvalue=r.getCleanValue(n))}(a),a=a.sort(function(e,t){return e.maxvalue-t.maxvalue}),d=g=t.minvalue&&v.getCleanValue(t.minvalue),g=(d!==je||null!==d)&&(u?d+"%":v.legendValue(d)),h.push({code:Object(b.R)(r),value:d,displayValue:g,label:t.startlabel}),l=0,s=a.length;l<s;l++)c=Re((n=a[l]).code||n.color),d=g=n.maxvalue,!isNaN(parseInt(d,10))&&(g=(d!==je||null!==d)&&(u?d+"%":v.legendValue(d)),h.push({code:Object(b.R)(c),value:d,displayValue:g,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,m},getDefaultConf:function(e){return t[e]}}}();var De=function(e){function t(){var e;return Object(i.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this)),we=Object(be.a)(Object(be.a)(e)),e.enabled=!1,e.drawOptions={},e.components={},e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"gradientLegend"}},{key:"getName",value:function(){return"gLegend"}}]),Object(n.a)(t,[{key:"setColorRange",value:function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}},{key:"configureAttributes",value:function(){var e,t,o,a,n,r,i,l,c,s,h=this,d=h.getFromEnv("chart"),g=h.getFromEnv("dataSource").chart,u=h.conf={},f=g.outcnvbasefont,m=g.outcnvbasefontsize,v=g.outcnvbasefontcolor,y=d.config.dataLabelStyle;Ae.init({chart:d}),h.data=h.getFromEnv("dataSource").colorrange,h._dontPlot||(h.drawOptions={smartLabel:h.getFromEnv("smartLabel"),gLegend:h},h._dontPlot=!1,h._recalculateLogicalSpace=!0,u.caption=Object(b.yb)(g.legendcaption),u.legendPosition=Object(b.yb)(g.legendposition,"bottom").toLowerCase(),u.showLegend=Object(b.Ab)(g.showlegend,1),u.interactiveLegend=Object(b.Ab)(g.interactivelegend,1),u.showLegendLabels=Object(b.Ab)(g.showlegendlabels,1),e=g.legenditemfontcolor||v,t=g.legenditemfont||f,o=g.legenditemfontsize||m,a=Object(b.Ab)(g.legenditemfontbold,0),n=g.legendcaptionfontcolor||v,r=g.legendcaptionfont||f,i=g.legendcaptionfontsize||m,l=Object(b.Ab)(g.legendcaptionfontbold,1),s=(c=g.legendaxisbordercolor?Object(b.kb)(Object(b.R)(g.legendaxisbordercolor)):je)?Object(b.Ab)(g.legendaxisborderalpha,100)/100:je,u.axisTextItemConf={style:{fill:e?Object(p.c)(Object(b.yb)(e)):y.color,fontFamily:t?Object(b.yb)(t):y.fontFamily,fontSize:o?Object(b.Ab)(o):y.fontSize.match(/\d+/)[0],fontWeight:a?"bold":y.fontWeight}},u.legendCaptionConf={style:{fill:n?Object(p.c)(Object(b.yb)(n)):y.color,fontFamily:r?Object(b.yb)(r):y.fontFamily,fontSize:i?Object(b.Ab)(i):y.fontSize.match(/\d+/)[0],fontWeight:l?"bold":y.fontWeight,fontStyle:"normal"}},u.legendAxisConf={legendAxisHeight:11,style:{stroke:c,"stroke-opacity":s},line:{style:{stroke:Object(p.c)(Object(b.yb)(g.legendscalelinecolor,"FFF8E9"),Object(b.Ab)(g.legendscalelinealpha,100)),"stroke-width":Object(b.Ab)(g.legendscalelinethickness)}}},u.sliderGroupConf={showTooltip:Object(b.Ab)(g.showtooltip,1),outerCircle:{rFactor:Object(b.Ab)(g.sliderdiameterfactor),style:{stroke:Object(p.c)(Object(b.yb)(g.legendpointerbordercolor,"757575"),Object(b.Ab)(g.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(b.Ab)(g.sliderholediameterfactor),style:{stroke:Object(p.c)(Object(b.yb)(g.legendpointercolor,"FFFFFF"),Object(b.Ab)(g.legendpointeralpha,100))}}},u.legendCarpetConf={spreadFactor:Object(b.Ab)(g.legendspreadfactor),allowDrag:!!Object(b.Ab)(g.legendallowdrag,0),captionAlignment:Object(b.yb)(g.legendcaptionalignment,"center"),style:{fill:Object(p.c)(Object(b.yb)(g.legendbgcolor,"e4d9c1"),Object(b.Ab)(g.legendbgalpha,100)),stroke:Object(p.c)(Object(b.yb)(g.legendbordercolor,"c4b89d"),Object(b.Ab)(g.legendborderalpha,100)),"stroke-width":Object(b.Ab)(g.legendborderthickness,1)}})}},{key:"postConfigureInit",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d=this,g=d.conf;d.elem={},g.interactiveLegend?(a=Pe(Ae.getDefaultConf("sliderGroupConf"),g.sliderGroupConf),this.sGroup?((o=d.elem.sGroup=this.sGroup).configure(a),d.elem.sGroup.gLegend=d):(this.sGroup=d.elem.sGroup=o=new Ke(a),o.configure(a),d.elem.sGroup.gLegend=d)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(a=Pe(Ae.getDefaultConf("legendCarpetConf"),g.legendCarpetConf)).legendPosition=g.legendPosition,h=Ae.getDefaultConf("legendBodyConf"),"bottom"===g.legendPosition?(d.drawOptions.refSideKey="canvasWidth",d.drawOptions.refOffsetKey="canvasLeft",n=Pe(Ae.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),h.legendPosition="bottom",(s=Pe(Ae.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="bottom",n.legendPosition="bottom"):(d.drawOptions.refSideKey="canvasHeight",d.drawOptions.refOffsetKey="canvasTop",n=Pe(Ae.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),h.legendPosition="right",(s=Pe(Ae.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="right",n.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new Ne,this.components.LegendBody=new He,this.components.LegendAxis=new ze,this.components.LegendValues=new Ye,g.showLegendLabels&&(this.components.LegendLabels=new We)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,r=this.components.LegendBody,g.showLegendLabels&&(i=this.components.LegendLabels),this.components.LegendCarpet.configure(a),this.components.LegendValues.configure(n),this.components.LegendAxis.configure(s),this.components.LegendBody.configure(d.drawOptions.colorRange,h,n),g.showLegendLabels&&i.configure(n),g.caption?(c=Pe(Ae.getDefaultConf("legendCaptionConf"),g.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(g.caption,c):(this.componentCaption=new Ge).configure(g.caption,c),e.addCompositions(this.componentCaption,Le.CAPTION)):(e.removeCompositions(Le.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,Le.RANGE),i&&r.addCompositions(i,Le.AXIS_LABEL),r.addCompositions(t,Le.LEGEND_AXIS),r.addCompositions(l,Le.AXIS_VALUE),e.addCompositions(r,Le.LEGEND_BODY),d.elem.gl=new Ve(e)}},{key:"getValueRange",value:function(){var e,t,o=this.elem&&this.elem.sGroup,a=o.sliders,n=o.extremes;return e=a.false.currPos,t=n[1]-n[0]+a.true.currPos,[{min:o.getValueFormPixel(e),max:o.getValueFormPixel(t)}]}},{key:"_dispose",value:function(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},Object(r.a)(Object(c.a)(t.prototype),"_dispose",this).call(this)}},{key:"getCalculatedLogicalSpace",value:function(){return this._logicalArea}},{key:"setCalculatedLogicalSpace",value:function(e){this._logicalArea=e}},{key:"getLogicalSpace",value:function(e){var t,o,a,n=this,r=n.conf,i={height:0,width:0},l=n.drawOptions,c=n.getFromEnv("chartConfig");return n._recalculateLogicalSpace?n._dontPlot?i:(n._recalculateLogicalSpace=!1,n.postConfigureInit(),r.showLegend?(o=l.refSideKey,a=l.refOffsetKey,n.drawOptions.refSide=c[o],n.drawOptions.refOffset=c[a],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,n.elem.gl&&(t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.elem.gl&&n.setCalculatedLogicalSpace(t)),n.getCalculatedLogicalSpace()):i):(o=l.refSideKey,a=l.refOffsetKey,n.drawOptions.refSide=c[o],n.drawOptions.refOffset=c[a],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.setCalculatedLogicalSpace(t),n.getCalculatedLogicalSpace()||i)}},{key:"resetLegend",value:function(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}},{key:"allocatePosition",value:function(){var e,t,o,a,n,r,i=this.getFromEnv("chart"),l=i.config,c=this.conf||{},s=c.legendPosition,h=l.canvasLeft,d=l.canvasTop,g=l.canvasWidth,u=l.canvasHeight,f=l.marginBottom,b=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=c.width=e.width,a=c.height=e.height,"bottom"===s?(n=h+(0>(t=g-o)?0:t/2),r=l.height-e.height-f-(l.actionBarHeight||0)):(r=d+(0>(t=u-a)?0:t/2),n=l.width-e.width-b),c.xPos=n,c.yPos=r)}},{key:"draw",value:function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{},a=e.hasGradientLegend;!e.config.gLegendEnabled||t&&a&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}},{key:"drawLegendComponent",value:function(e,t,o){var a,n=this,r=n.conf;return n._dontPlot?void 0:r.showLegend?(n.drawOptions.animationManager=o.animationManager,n.drawOptions.parentGroup=o.parentGroup,n.drawOptions.x=e,n.drawOptions.y=t,n.drawOptions.maxOtherSide=n.drawOptions.maxOtherSide||o.maxOtherSide,a=n.elem.gl.draw(n.drawOptions).getBBox(),r.xPos=a.x,r.yPos=a.y,r.height=a.height,r.width=a.width,void(n.enabled=!0)):void(n.enabled=!1)}}]),t}(d.a),Ve=function(){function e(t){Object(i.a)(this,e),this.carpet=t}return Object(n.a)(e,[{key:"draw",value:function(e){return this.carpet.draw(e)}},{key:"getLogicalSpace",value:function(e,t){return this.carpet.getLogicalSpace(e,t)}},{key:"dispose",value:function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}]),e}(),Ne=function(){function e(t){Object(i.a)(this,e),this.conf=t,this._id="GL_CARPET",this.compositionsByCategory={},this.node=je,this.group=je,this._lSpace=je,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendCarpet"}},{key:"getType",value:function(){return"legend"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"removeCompositions",value:function(e){delete this.compositionsByCategory[e]}},{key:"getBoundingBox",value:function(e){var t,o,a=this.conf,n=a.spreadFactor,r=e.refSide,i=e.alignment,l=e.refOffset,c=e.x,s=e.y;return"bottom"===this.conf.legendPosition?(t=a.width=r*n,o=e.maxOtherSide,i&&(c===je||null===c)&&(c=(l+r)/2-t/2)):(o=a.height=r*n,t=e.maxOtherSide,i&&(s===je||null===s)&&(s=(l+r)/2-o/2)),{width:t,height:o,x:c,y:s}}},{key:"getPostCalcDecisionsH",value:function(e,t){var o,a=this.conf.padding,n=0;for(o in this.moveInstructions={},t)n+=t[o].height||0;e.height=n+2*a.v}},{key:"getLogicalSpace",value:function(e,t){var o,a,n,r,i,l=this._lSpace,c=["CAPTION","LEGEND_BODY"],s=this.conf.padding,h=this.compositionsByCategory,d=0,g={},u=0;if(l&&!t)return l.isImpure=!0,l;(Be((l=this._lSpace=a=this.getBoundingBox(e)).x)||Be(l.y)||Be(l.height)||Be(l.width))&&(this.autoRecalculate=!0),(n=Pe(a,{})).height-=2*s.v,n.width-=2*s.h,n.x+=s.h,n.y+=s.v;for(var f=0;f<c.length;f++)(o=h[c[f]])&&((i=Pe(n,{})).y+=d,d=n.height*o.conf.spreadFactor,i.height=d+u,r=o.getLogicalSpace(Pe(i,{}),e,t),u=i.height-r.height,g[c[f]]=r,d=r.height);return this.getPostCalcDecisions(a,g),this._lSpace=a,a}},{key:"setupDragging",value:function(){var e=this.group,t=0,o=0,a=0,n=0;e.css({cursor:"move"}),e.drag(function(r,i){t=r,o=i,e.attr({transform:"t"+(a+t)+","+(n+o)})},function(){a+=t,n+=o},b.Jb)}},{key:"draw",value:function(e){var t,o,a,n=this.conf,r=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,l=e.animationManager,c=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),a=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:we,container:c,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:a,css:n.style,component:we,container:t,label:"rect"});for(var s=0;s<r.length;s++)(o=i[r[s]])&&o.draw(n.captionAlignment,a,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return n.allowDrag&&this.setupDragging(),this.node}},{key:"getPostCalcDecisions",value:function(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}},{key:"getPostCalcDecisionsV",value:function(e,t){var o,a,n,r=this.conf.padding,i=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(a in this.getPostCalcDecisionsH(e,t),t)i=i<(o=t[a].width)?o:i;for(a in e.width=i+2*r.h,t)(n=i-(o=t[a].width))&&(l[a]="t"+n/2+",0")}}]),e}(),Ge=function(){function e(t,o){Object(i.a)(this,e),this.rawText=t,this.conf=o,this._id="GL_CAPTION",this.node=je,this.bound=je,this._lSpace=je,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){var e=arguments[1];return e.x+e.width/2}}}return Object(n.a)(e,[{key:"configure",value:function(e,t){this.rawText=e,this.conf=t}},{key:"getName",value:function(){return"LegendCaption"}},{key:"getType",value:function(){return"caption"}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l=this.conf.padding,c=this._lSpace,s=this.rawText,h=t.gLegend.getFromEnv("chartConfig");return c&&!o?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:je,smartText:je}},a=t.smartLabel,s?((n=Pe(e,{})).height-=2*l.v,n.width-=2*l.h,n.x+=l.h,n.y+=l.v,a.useEllipsesOnOverflow(h.useEllipsesWhenOverflow),Me(i=Pe(this.conf.style,{})),a.setStyle(this._metaStyle=i),r=a.getSmartText(s,n.width,n.height),n.height=r.height,n.width=r.width,e.height=r.height+2*l.v,e.width=r.width+2*l.h,c.node.smartText=r,c.node.logicArea=n,c.bound=e,e):c.bound)}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d=this.conf,g=d.bound||{};return 3<=arguments.length?(i=arguments[0],l=arguments[1],c=arguments[2]):2<=arguments.length&&(i=arguments[0],c=arguments[1]),e=c.parentLayer,h=c.animationManager,this.group=t=h.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:d.style,component:we,container:e}),this.getLogicalSpace(l,c),s=(n=this._lSpace).node,a=n.bound,this.bound=o=h.setAnimation({el:this.bound||"rect",attr:a,css:g.style,container:t,component:we}),r="string"==typeof i?this.LegendCaption[i.toUpperCase()].x(s.smartText,l||s.logicArea):i,this.node=h.setAnimation({el:this.node||"text",attr:{text:s.smartText.text,x:r,y:s.logicArea.y+s.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:d.style.fill},container:t,component:we}),{group:t,bound:o,node:this.node}}},{key:"dispose",value:function(){this.group.remove(),this.bound.remove(),this.node.remove()}}]),e}(),He=function(){function e(t,o,a){Object(i.a)(this,e),this.colorRange=t,this.conf=o,this.childTextConf=a,this._id="GL_BODY",this.bound=je,this.group=je,this.compositionsByCategory={},this._lSpace=je,this.SC_STACK=[Le.AXIS_LABEL,Le.LEGEND_AXIS,Le.AXIS_VALUE],this.DARW_STACK=[Le.AXIS_VALUE,Le.LEGEND_AXIS,Le.AXIS_LABEL]}return Object(n.a)(e,[{key:"configure",value:function(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}},{key:"getName",value:function(){return"LegendBody"}},{key:"getType",value:function(){return"legend"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"getSpaceTaken",value:function(e){return"bottom"===this.conf.legendPosition?e.height:e.width}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h=this._lSpace,d=this.conf.padding,g=this.compositionsByCategory,u=0;if(h&&!o)return h.isImpure=!0,h;for(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:je}},(i=Pe(e,{})).height-=2*d.v,i.width-=2*d.h,i.x+=d.h,i.y+=d.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,c=0,s=this.SC_STACK.length;c<s;c++)(a=g[this.SC_STACK[c]])&&(n=l(r,a.conf.spreadFactor),r=a.getLogicalSpace(Pe(n,{}),t,o),u+=this.getSpaceTaken(r));return this.updateEffectivePlotArea(e,i,u),h.node.logicArea=i,h.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h=this.childTextConf,d=this.conf.bound.style||{},g=this.compositionsByCategory;for(3<=arguments.length?(r=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(r,l),i=this._lSpace,this.group=n=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:h.style,container:t,component:we}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:d,container:n,component:we}),l.colorRange=this.colorRange,l.parentLayer=n,c=0,s=this.DARW_STACK.length;c<s;c++)(a=g[this.DARW_STACK[c]])&&a.draw(l);return l.moveInstructions&&n.attr({transform:l.moveInstructions}),{bound:o,group:n}}},{key:"getCompositionPlotAreaFor",value:function(e){var t,o="bottom"===this.conf.legendPosition;return t=Pe(e,{}),function(a,n){return a=a||{},o?(t.y+=a.height||0,t.height=e.height*n):(t.x+=a.width||0,t.width=e.width*n),t}}},{key:"updateEffectivePlotArea",value:function(e,t,o){var a=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*a.v):(t.width=o,e.width=o+2*a.h)}}]),e}(),We=function(){function e(t){Object(i.a)(this,e),this.conf=t,this.node=[],this._id="GL_LABELS"}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getType",value:function(){return"label"}},{key:"getName",value:function(){return"LegendLabel"}},{key:"getEffectivePlotArea",value:function(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b,p,m,v,y,k,O,C,x,j,A,w=Math.max,F="bottom"===this.conf.legendPosition,L=this._lSpace,E=this.conf,S=E.padding,_=[],T=t.gLegend.getFromEnv("chartConfig"),I=[];if(L&&!o)return L.isImpure=!0,L;for(a=t.colorRange,n=t.smartLabel,g=a.getCumulativeValueRatio(),r=a.colorRange,b=(L=this._lSpace={bound:{height:0,width:0},node:{logicArea:je,smartTexts:[]}}).node.smartTexts,h=Pe(e,{}),m=this.getEffectivePlotArea(h),A=F?m.width:m.height,n.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),j=Pe(E.style,{}),Me(this._metaStyle=j),n.setStyle(j),v=n.getSmartText("W"),i=0,l=r.length;i<l;i++)(d=r[i].label)?I.push({oriIndex:i,label:d}):b[i]=je;if(0===(l=I.length))return{height:0,width:0};for(f=u=1<l?(g[I[l-1].oriIndex]-g[I[0].oriIndex])/2*A/100:w(g[I[0].oriIndex],100-g[I[0].oriIndex])/2*A/100,F?((C=n.getSmartText(I[0].label,f,m.height)).x=g[I[0].oriIndex]*m.width/100,c=C.x+C.width):((C=n.getSmartText(I[0].label,f,m.width)).y=g[I[0].oriIndex]*m.height/100,c=C.y+C.width),_.push(C.height),b[I[0].oriIndex]=C,F?((C=n.getSmartText(I[l-1].label,f,m.height)).x=g[I[l-1].oriIndex]*m.width/100,s=C.x-C.width):((C=n.getSmartText(I[l-1].label,f,m.width)).y=g[I[l-1].oriIndex]*m.height/100,s=C.y-C.width),_.push(C.height),b[I[l-1].oriIndex]=C,O=c,i=1;i<l-1;i++)d=I[i].label,x=I[i].oriIndex,C=je,y=i+1===l-1?s:g[I[i+1].oriIndex]*A/100,k=g[I[i].oriIndex]*A/100,(u=Math.min(k-O,y-k))>2*v.width&&(F?(C=n.getSmartText(d,u,m.height)).x=g[x]*m.width/100:(C=n.getSmartText(d,u,m.width)).y=g[x]*m.height/100,O=u,_.push(C.height)),b[I[i].oriIndex]=C;return p=w.apply(Math,_),F?(m.height=p,e.height=p+2*S.v):(m.width=p,e.width=p+2*S.v),L.node.logicArea=m,L.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g="bottom"===this.conf.legendPosition,u=this.conf,f=u.bound&&u.bound.style||{stroke:"none"},b={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),d=i.animationManager,e=i.parentLayer,this.getLogicalSpace(a,i),c=(r=this._lSpace).node.logicArea,s=r.node.smartTexts,this.group=o=d.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:we}),this.bound=t=d.setAnimation({el:this.bound||"rect",attr:r.bound,css:f,container:o,component:we});for(var p=0;p<this.node.length;p++)this.node[p].remove();for(this.node=[],l=0,h=s.length;l<h;l++)(n=s[l])&&(g?(b.y=c.y+n.height/2,b.x=l===h-1?c.x+n.x-n.width/2:l?c.x+n.x:c.x+n.x+n.width/2):(b.x=c.x+n.height/2,b.y=l===h-1?c.y+n.y-n.width/2:l?c.y+n.y:c.y+n.y+n.width/2),this.node.push(d.setAnimation({el:"text",attr:{text:n.text,x:b.x,y:b.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill,transform:g?"R0":"R270,"+b.x+","+b.y},container:o,component:we})));return{group:o,bound:t,node:this.node}}}]),e}(),ze=function(){function e(t){Object(i.a)(this,e),this.conf=t,this._id="FL_AXIS",this.node=je,this.group=je,this.shadow=je,this.markerLine=je,this.compositionsByCategory={}}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendAxis"}},{key:"getType",value:function(){return"axis"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"getLogicalSpace",value:function(){var e,t,o,a,n,r,i="bottom"===this.conf.legendPosition,l=arguments[0],c=arguments[2],s=this._lSpace,h=this.conf,d=h.padding,g=h.legendAxisHeight,u=this.compositionsByCategory,f=0;return s&&!c?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:je}},(n=Pe(l,{})).height-=2*d.v,n.width-=2*d.h,n.x+=d.h,n.y+=d.v,e=g/2+h.line.offset,t=g/2,(a=u[Le.RANGE])&&(r=a.sliders.false.conf.outerCircle.rFactor*g,t+=f=Math.max(r/2-g/2,0)),i?(n.y+=f,n.height=o=t+e+f,l.height=o+2*d.v):(n.x+=f,n.width=o=t+e+f,l.width=o+2*d.v),s.node.logicArea=n,s.bound=l,l)}},{key:"getDrawableAxisArea",value:function(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}},{key:"preDrawingRangeParamV",value:function(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}},{key:"preDrawingRangeParamH",value:function(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}},{key:"preDrawingRangeParam",value:function(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}},{key:"getScaleMarkerPathStrH",value:function(e,t){var o,a,n,r,i,l=Pe(e,{}),c=this.conf.line,s="",h="";for(l.x+=l.r,l.width-=2*l.r,i=l.y+l.height,o=0,a=t.length;o<a;o++)n=t[o],s+="M"+(r=l.x+n*l.width/100)+","+(i-c.grooveLength)+"L"+r+","+(i+c.offset);return s+(h+="M"+l.x+","+(i+c.offset)+"L"+(l.x+l.width)+","+(i+c.offset))}},{key:"getColorGradientH",value:function(e){return{axis:e.getBoxFill(),shadow:Object(b.Lb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u,f=this.conf,b=f.bound||{},p=f.line,m=b.style||{},v=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],d=arguments[1]):1<=arguments.length&&(d=arguments[0]),g=d.animationManager,e=d.parentLayer,n=(a=d.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,d),h=this._lSpace,this.group=i=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:we}),this.bound=g.setAnimation({el:this.bound||"rect",attr:h.bound,css:m,component:we,container:i}),s=this.getDrawableAxisArea(h.node.logicArea),c=this.getColorGradient(a),f.style.fill=c.axis,f.shadow.style.fill=c.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:s,css:f.style,container:i,component:we}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:s,css:f.shadow.style,container:i,component:we}),u=this.getScaleMarkerPathStr(s,n),this.path=g.setAnimation({el:this.path||"path",attr:{path:u},css:p.style,container:i,component:we}),v)r=v[o],o===Le.RANGE&&(d[(l=this.preDrawingRangeParam(s)).prop]=l[l.prop],d.key=l.prop,d.rCalcBase=l.calculationBase,d.parentLayer=i,r.draw(l.rangeStart,l.rangeEnd,d))}},{key:"getScaleMarkerPathStr",value:function(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}},{key:"getColorGradient",value:function(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}},{key:"getScaleMarkerPathStrV",value:function(e,t){var o,a,n,r,i,l=Pe(e,{}),c=this.conf.line,s="",h="";for(l.y+=l.r,l.height-=2*l.r,r=l.x+l.width,o=0,n=t.length;o<n;o++)a=t[o],i=l.y+a*l.height/100,s+="M"+(r-c.grooveLength)+","+i+"L"+(r+c.offset)+","+i;return s+(h+="M"+(r+c.offset)+","+l.y+"L"+(r+c.offset)+","+(l.y+l.height))}},{key:"getColorGradientV",value:function(e){return{axis:e.getBoxFill(!0),shadow:Object(b.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}]),e}(),Xe=function(){function e(t,o,a){Object(i.a)(this,e),this.conf=o.conf,this.sliderIndex=t,this.rangeGroup=o.sliderGroup,this._id=a,this.node=je,this.tracker=je,this.currPos=0,this.swing=[]}return Object(n.a)(e,[{key:"configure",value:function(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}},{key:"getType",value:function(){return"slider"}},{key:"getName",value:function(){return"Slider"}},{key:"updateSwingRange",value:function(e,t){this.swing[+e]=t}},{key:"draw",value:function(e,t,o,a){var n,r,i,l,c,s,h,d=Math.ceil,g=a.parentLayer,u=a.animationManager,f=this.conf,b=f.outerCircle,p=f.innerCircle,m=u.getFromEnv("chart").config,v=d(b.rFactor*a.rCalcBase/2),y=d(p.rFactor*a.rCalcBase/2),k="L"-y,O=a.gLegend.getFromEnv("toolTipController"),C=this.sliderIndex;return f.outerRadius=v,f.innerRadius=y,this._scaleVal=t,p.style["stroke-width"]=k,y+=l=d(b.style["stroke-width"]/2),r=this.node=u.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:g,component:we}),"x"===a.key?(c=o,s=e,s+=C?-y:+y):(c=e,s=o,c+=C?-y:+y),this.oCircle=u.setAnimation({el:this.oCircle||"circle",attr:{cx:c,cy:s,r:v},css:b.style,container:r,component:we}),this.iCircle=u.setAnimation({el:this.iCircle||"circle",attr:{cx:c,cy:s,r:y},css:p.style,container:r,component:we}),h=this.tracker=u.setAnimation({el:this.tracker||"circle",attr:{cx:c,cy:s,r:v+5,fill:Ee,stroke:Ee,cursor:"pointer"},container:r,component:we}),r.attr({transform:"x"===a.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),n=m.showToolTip?t:"",O.enableToolTip(h,n),this._dragAPI=i=this.getDragAPI("x"===a.key),h.undrag(),h.drag(i.dragging,i.dragStart,i.dragEnd),{translateAscending:v+l}}},{key:"getDragAPI",value:function(e){var t,o,a,n,r=this,i=r.node,l=r.sliderIndex,c=r.rangeGroup,s=r.conf.innerRadius;return{dragging:function(h){var d,g,u,f,b;return h.stopPropagation(),u=e?h.data[1]:h.data[0],l?(d=t[0]-t[1]+s,g=0):(d=0,g=t[1]-t[0]-s),(b=r.currPos+u)<d?u+=d-b:b>g&&(u-=b-g),i.attr({transform:e?"t0,"+(r.currPos+u):"t"+(r.currPos+u)+",0"}),o=u,a&&clearTimeout(a),a=setTimeout(function(){c.updateWhenInRest(r,r.currPos+u)},100),f=c.updateWhenInMove(r,r.currPos+u),r.conf.showTooltip&&r.tracker.data("__FC_tooltipText",f),n=!0,!0},dragStart:function(e){e.stopPropagation(),t=r.swing,n=!1,c.dragStarted(r)},dragEnd:function(){var e;c.dragCompleted(r,n,r.currPos+o),n&&(a&&clearTimeout(a),a=setTimeout(function(){c.updateWhenInRest(r,r.currPos)},100),r.currPos+=o,e=t[+l]+r.currPos,c.updateRange(r,e))}}}},{key:"dispose",value:function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}]),e}(),Ke=function(){function e(t){Object(i.a)(this,e);var o={};this._id="GL_SG1",this.conf=t,o.conf=t,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,o.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[Se]=new Xe(Se,o,this._id+"_0"),this.sliders[_e]=new Xe(_e,o,this._id+"_1")}return Object(n.a)(e,[{key:"configure",value:function(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[Se].configure(Se,t,this._id+"_0"),this.sliders[_e].configure(_e,t,this._id+"_1")}},{key:"getType",value:function(){return"slider"}},{key:"getName",value:function(){return"SliderGroup"}},{key:"initRange",value:function(e,t){var o=e.sliderIndex;this.extremes[+o]=t}},{key:"updateRange",value:function(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)}},{key:"reset",value:function(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[Se].configure(Se,e,this._id+"_0"),this.sliders[_e].configure(_e,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}},{key:"draw",value:function(e,t,o){var a,n,r,i,l,c=Math.ceil,s=this.sliders,h=s[!1],d=s[!0],g=o.colorRange,u=g.colorRange,f=g.data.mapByPercent,b=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,a){this.getValueFormPixel=function(n){return e+(t-e)/(a-o)*n}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,a){var n,r,i=this.extremes;return n=o.sliderIndex?i[1]-i[0]+a:a,r=this.getValueFormPixel(n),r=t?parseFloat(r).toFixed(2)+"%":e.legendValue(r)}},this._drawParams=[e,t,o],this.updateWhenInMove(b,f),n=h.conf.outerCircle,r=c(h.conf.innerCircle.rFactor*o.rCalcBase/2),r+=c(n.style["stroke-width"]/2),this.extremes[0]=e+r,this.extremes[1]=t-r,i=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:u[0].value,this.max=this.max?this.max:u[u.length-1].value,l=u[u.length-1].value-u[0].value,h.currPos=i*(this.min-u[0].value)/l,d.currPos=i*(this.max-u[0].value)/l-i,h.draw(e,f?b.legendPercentValue(this.min):b.legendValue(this.min),o[o.key],o),a=d.draw(t,f?b.legendPercentValue(this.max):b.legendValue(this.max),o[o.key],o),h.swing=this.extremes.slice(0),d.swing=this.extremes.slice(0),h.swing[1]+=d.currPos,d.swing[0]+=h.currPos,this.getValueFormPixel(u[0].value,u[u.length-1].value,this.extremes[0],this.extremes[1]),a}},{key:"updateWhenInRest",value:function(e,t){var o,a,n=this.sliders,r=this.extremes,i=e.sliderIndex;i?(o=n[!i].currPos,a=r[1]-r[0]+t):(o=t,a=r[1]-r[0]+n[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(a).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}},{key:"dragStarted",value:function(e){var t=this.sliders,o=this.extremes,a=e.conf,n=this._fcChart;n.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:a.outerRadius,legendPointerWidth:a.innerRadius,outerRadius:a.outerRadius,innerRadius:a.innerRadius},[n.id])}},{key:"dragCompleted",value:function(e,t,o){var a,n,r=this.sliders,i=this.extremes,l=e.conf,c=this.getValueFormPixel(r.false.currPos),s=this.getValueFormPixel(i[1]-i[0]+r.true.currPos),h=this._fcChart;e.sliderIndex?(a=c,n=this.getValueFormPixel(i[1]-i[0]+o)):(a=this.getValueFormPixel(o),n=s),t&&h.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:c,previousMaxValue:s,minValue:a,maxValue:n},[h.id]),h.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:a},{value:n}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[h.id])}},{key:"dispose",value:function(){this.sliders[Se].dispose(),this.sliders[_e].dispose()}}]),e}(),Ye=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this,arguments[0])))._id="GL_VALUES",e.node=[],e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendValues"}},{key:"getType",value:function(){return"legend"}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b,p,m,v,y,k,O,C,x,j,A,w,F,L=Math.min,E=Math.max,S="bottom"===this.conf.legendPosition,_=this._lSpace,T=this.conf,I=T.padding,P=t.gLegend.getFromEnv("chartConfig"),R=[],M=[];if(_&&!o)return _.isImpure=!0,_;for(a=t.colorRange,n=t.smartLabel,r=a.colorRange,s=a.getCumulativeValueRatio(),F=(_=this._lSpace={bound:{height:0,width:0},node:{logicArea:je,smartTexts:[]}}).node.smartTexts,(C=Pe(e,{})).height-=2*I.v,C.width-=2*I.h,C.x+=I.h,C.y+=I.v,n.useEllipsesOnOverflow(P.useEllipsesWhenOverflow),w=Pe(T.style,{}),Me(this._metaStyle=w),n.setStyle(w),A=n.getSmartText("W"),c=r.length,S?(u=h=(s[c-1]-s[0])/2*C.width/100,j=r[0].displayValue,(i=n.getSmartText("string"!=typeof j&&j!==je&&j.toString()||j,u,C.height)).x=s[0]*C.width/100,f=i.x+i.width,R.push(i.height)):(u=h=(s[c-1]-s[0])/2*C.height/100,(i=n.getSmartText(r[0].displayValue,C.width,u)).y=s[0]*C.height/100,m=i.y+i.width,M.push(i.width)),F[0]=i,S?((i=n.getSmartText(r[c-1].displayValue,u,C.height)).x=s[c-1]*C.width/100,p=i.x-i.width,R.push(i.height),b=f):((i=n.getSmartText(r[c-1].displayValue,C.width,u)).y=s[c-1]*C.height/100,y=i.y-i.height,M.push(i.width),v=m),F[c-1]=i,l=1;l<c-1;l++)i=je,x=r[l].displayValue,S?(d=l+1===c-1?p:s[l+1]*C.width/100,(h=L((g=s[l]*C.width/100)-b,d-g))>1.5*A.width&&((i=n.getSmartText(x,2*h,C.height)).x=s[l]*C.width/100,b=h,R.push(i.height))):(d=l+1===c-1?y:s[l+1]*C.height/100,(h=L((g=s[l]*C.height/100)-v,d-g))>2*A.height&&((i=n.getSmartText(x,C.width,2*h)).y=s[l]*C.height/100,v=h,M.push(i.width))),F[l]=i;return S?(k=E.apply(Math,R),C.height=k,e.height=k+2*I.v):(O=E.apply(Math,M),C.width=O,e.width=O+2*I.h),_.node.logicArea=C,_.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u=this.conf,f="bottom"===u.legendPosition,b=u.bound&&u.bound.style||{stroke:"none"},p={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,l=i.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(a,i),r=(n=this._lSpace).node.logicArea,h=n.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:we}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:n.bound,css:b,container:o,component:we});for(var m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],c=0,s=l.length;c<s;c++)(d=h[c])&&(f?(p.y=r.y+d.height/2,p.x=c===s-1?r.x+d.x-d.width/2:c?r.x+d.x:r.x+d.x+d.width/2):(p.x=r.x+d.width/2,p.y=c===s-1?r.y+d.y-d.height/2:c?r.y+d.y:r.y+d.y+d.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:d.text,x:p.x,y:p.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill},container:o,component:we})));return{group:o,bound:t}}}]),t}(We),Je=De,Ue=o(405);var Ze=function(e){!function(e){var t,o=e.getFromEnv("dataSource").colorrange,a=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,r="TreeMap"===e.getName(),i=e.getFromEnv("legend"),l=e.getFromEnv("gLegend");"gradient"===(t=o&&e.config.showLegend?n?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":r?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+a?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),i&&i.remove(),Object(b.M)(e,Je,"gLegend",1),(l=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",l)):"icon"===t?(e.deleteFromEnv("gLegend"),l&&l.remove(),Object(b.M)(e,Ue.a,"legend",1,{showLegend:!0}),(i=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",i)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),l&&l.remove(),i&&i.remove())}(e)},qe=Object(v.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},g),$e="0,100",Qe={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},et={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){var e,t,o,a,n,r=this.jsVars.instanceAPI.getDatasets()||[],i=r.length,l=[];for(e=0;e<i;e++)if("entities"===(o=r[e]||[]).getName()){t=o;break}for(e in i=(a=t.components.data).length,a)a.hasOwnProperty(e)&&(n=(a[e]||{}).config||{},l.push({id:n.id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText}));return l},getMapAttribute:function(){return Object(f.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){var e=this;return Object(f.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){var t,o,a,n=this.jsVars.instanceAPI.getDatasets()||[],r=n.length;for(t=0;t<r;t++)if("markers"===(o=n[t]||[]).getName()){a=o;break}a&&!a.addMarkerItem(e)&&Object(f.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){var o,a,n,r=this.jsVars.instanceAPI.getDatasets()||[],i=r.length;for(o=0;o<i;o++)if("markers"===(a=r[o]||[]).getName()){n=a;break}n&&e&&(e=(e+tt).toLowerCase(),n.updateMarkerItem(e,t))},removeMarker:function(e){var t,o,a,n=this.jsVars.instanceAPI.getDatasets()||[],r=n.length;for(t=0;t<r;t++)if("markers"===(o=n[t]||[]).getName()){a=o;break}e&&(e=(e+tt).toLowerCase(),a._removeMarkerItem(e))}},tt="",ot=window.Math,at=ot.min,nt=ot.max,rt=function(e){function t(e,o){var a;for(var n in Object(i.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this))).subpalette="",a.key="",a.index=o,e)a.subpalette=qe[e[n]],a[n]=a.subpalette instanceof Array?a.subpalette[o]:a.subpalette,a.key=n;return a}return Object(s.a)(t,e),t}(d.a),it=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).friendlyName="Map",e.revision=1,e.hasCanvas=!0,e.standaloneInit=!1,e.defaultDatasetType="maps",e.defaultSeriesType="geo",e.fireGroupEvent=!0,e.legendposition="right",e.hasGradientLegend=!0,e.isMap=!0,e.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[$e,$e,$e,$e,$e],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},e.colorPaletteMap=Qe,e.eiMethods=et,e.registerFactory("legend",Ze,["canvas"]),e.registerFactory("axis",function(){},["canvas"]),e.registerFactory("colormanager-decider",Fe,["legend"]),e.registerFactory("dataset",ue,["colormanager-decider"]),e.registerFactory("canvas",fe.a),e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"_checkInvalidSpecificData",value:function(){return this.config.invalid=!1,!1}},{key:"__setDefaultConfig",value:function(){Object(r.a)(Object(c.a)(t.prototype),"__setDefaultConfig",this).call(this);var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}},{key:"getName",value:function(){return this.config.name||"GEO"}},{key:"getType",value:function(){return"chartAPI"}},{key:"configureAttributes",value:function(e){var o,a=this,n=a.getChildren("colorPalette")&&a.getChildren("colorPalette")[0];o=e.chart=e.chart||e.graph||e.map||{},a.jsonData=e,Object(b.M)(a,m.a,"mapAnnotations"),n||(n=new rt(this.colorPaletteMap,(0<o.palette&&6>o.palette?o.palette:Object(b.Ab)(a.paletteIndex,1))-1),a.attachChild(n,"colorPalette")),a.config.skipCanvasDrawing=!0,Object(r.a)(Object(c.a)(t.prototype),"configureAttributes",this).call(this,e),a._parseBackgroundCosmetics()}},{key:"parseChartAttr",value:function(e){var o,a,n,i,l,s=this,h=s.jsonData,d=h.chart||h.map,g=h.markers,u=new rt(this.colorPaletteMap,(0<d.palette&&6>d.palette?d.palette:Object(b.Ab)(s.paletteIndex,1))-1),f=Object(b.yb)(d.entitybordercolor,d.bordercolor,u.plotbordercolor),p=Object(b.yb)(d.entityfillcolor,d.fillcolor,u.plotfillcolor),m=Object(b.yb)(d.entityfillalpha,d.fillalpha,u.plotfillalpha),v=Object(b.yb)(d.entityfillratio,d.fillratio,u.plotfillratio),y=Object(b.yb)(d.entityfillangle,d.fillangle,u.plotfillangle),k=Object(b.yb)(d.nullentityfillcolor,d.nullentitycolor,p),O=Object(b.Ab)(d.usevaluesformarkers,h.markers&&h.markers.items&&h.markers.items.length,!(h.markers&&h.markers.application&&h.markers.application.length&&h.markers.definition&&h.markers.definition.length));Object(r.a)(Object(c.a)(t.prototype),"parseChartAttr",this).call(this,e),(o=s.config).origMarginTop=Object(b.Ab)(d.charttopmargin,d.maptopmargin,11),o.origMarginLeft=Object(b.Ab)(d.chartleftmargin,d.mapleftmargin,11),o.origMarginBottom=Object(b.Ab)(d.chartbottommargin,d.mapbottommargin,11),o.origMarginRight=Object(b.Ab)(d.chartrightmargin,d.maprightmargin,11),o.labelsOnTop=Object(b.Ab)(d.entitylabelsontop,1),a=(l=o.style).inCancolor,n=l.inCanfontFamily,i=l.inCanfontSize,o.entityOpts={baseScaleFactor:o.baseScaleFactor,dataLabels:{style:{fontFamily:n,fontSize:i,lineHeight:l.inCanLineHeight,color:l.inCancolor}},fillColor:p,fillAlpha:m,fillRatio:v,fillAngle:y,borderColor:f,borderAlpha:Object(b.yb)(d.entityborderalpha,d.borderalpha,s.borderAlpha,"100"),borderThickness:Object(b.Ab)(d.showentityborder,d.showborder,1)?Object(b.Ab)(d.entityborderthickness,d.borderthickness,1):0,scaleBorder:Object(b.Ab)(d.scaleentityborder,d.scaleborder,0),hoverFillColor:Object(b.yb)(d.entityfillhovercolor,d.hoverfillcolor,d.hovercolor,u.plothoverfillcolor),hoverFillAlpha:Object(b.yb)(d.entityfillhoveralpha,d.hoverfillalpha,d.hoveralpha,u.plothoverfillalpha),hoverFillRatio:Object(b.yb)(d.entityfillhoverratio,d.hoverfillratio,d.hoverratio,u.plothoverfillratio),hoverFillAngle:Object(b.yb)(d.entityfillhoverangle,d.hoverfillangle,d.hoverangle,u.plothoverfillangle),hoverBorderThickness:Object(b.yb)(d.entityborderhoverthickness,d.hoverborderthickness),hoverBorderColor:Object(b.yb)(d.entityborderhovercolor,f,u.plotbordercolor),hoverBorderAlpha:Object(b.yb)(d.entityborderhoveralpha,u.plotborderalpha),nullEntityColor:k,nullEntityAlpha:Object(b.yb)(d.nullentityfillalpha,d.nullentityalpha,m),nullEntityRatio:Object(b.yb)(d.nullentityfillratio,d.nullentityratio,v),nullEntityAngle:Object(b.yb)(d.nullentityfillangle,d.nullentityangle,y),connectorColor:Object(b.yb)(d.labelconnectorcolor,d.connectorcolor,a),connectorAlpha:Object(b.yb)(d.labelconnectoralpha,d.connectoralpha,"100"),connectorThickness:Object(b.Ab)(d.labelconnectorthickness,d.borderthickness,1),showHoverEffect:Object(b.Ab)(d.showentityhovereffect,d.usehovercolor,d.showhovereffect,1),hoverOnNull:Object(b.Ab)(d.hoveronnull,d.entityhoveronnull,1),labelPadding:Object(b.Ab)(d.labelpadding,5),showLabels:Object(b.Ab)(d.showlabels,1),labelsOnTop:Object(b.Ab)(d.entitylabelsontop,1),includeNameInLabels:Object(b.Ab)(d.includenameinlabels,1),includeValueInLabels:Object(b.Ab)(d.includevalueinlabels,0),useSNameInTooltip:Object(b.Ab)(d.usesnameintooltip,0),useShortName:Object(b.Ab)(d.usesnameinlabels,1),labelSepChar:Object(b.yb)(d.labelsepchar,", "),showTooltip:Object(b.Ab)(d.showentitytooltip,d.showtooltip,1),tooltipSepChar:Object(b.yb)(d.tooltipsepchar,", "),tooltext:d.entitytooltext,hideNullEntities:Object(b.Ab)(d.hidenullentities,0),showHiddenEntityBorder:Object(b.Ab)(d.showhiddenentityborder,1),showNullEntityBorder:Object(b.Ab)(d.shownullentityborder,1),hiddenEntityColor:Object(b.yb)(d.hiddenentitycolor,d.hiddenentityfillcolor,d.hiddenentityalpha||d.hiddenentityfillalpha?k:"ffffff"),hiddenEntityAlpha:Object(b.yb)(d.hiddenentityalpha,d.hiddenentityfillalpha,.001),shadow:Object(b.Ab)(d.showshadow,s.defaultPlotShadow,u.shadow)},o.markerOpts={dataLabels:{style:{fontFamily:Object(b.yb)(d.markerfont,n),fontSize:Object(b.Ab)(d.markerfontsize,parseInt(i,10)),fontColor:Object(b.yb)(d.markerfontcolor,a)}},showTooltip:Object(b.Ab)(d.showmarkertooltip,d.showtooltip,1),showLabels:Object(b.Ab)(d.showmarkerlabels,d.showlabels,1),showHoverEffect:Object(b.Ab)(d.showmarkerhovereffect,1),labelPadding:Object(b.yb)(d.markerlabelpadding,"5"),labelWrapWidth:Object(b.Ab)(d.markerlabelwrapwidth,0),labelWrapHeight:Object(b.Ab)(d.markerlabelwrapheight,0),fillColor:Object(b.yb)(d.markerfillcolor,d.markerbgcolor,u.markerfillcolor),fillAlpha:Object(b.yb)(d.markerfillalpha,u.markerfillalpha),fillAngle:Object(b.yb)(d.markerfillangle,u.markerfillangle),fillRatio:Object(b.yb)(d.markerfillratio,u.markerfillratio),fillPattern:Object(b.yb)(d.markerfillpattern,u.markerbgpattern),hoverFillColor:d.markerfillhovercolor,hoverFillAlpha:d.markerfillhoveralpha,hoverFillRatio:d.markerfillhoverratio,hoverFillAngle:d.markerfillhoverangle,borderThickness:Object(b.yb)(d.markerborderthickness,1),borderColor:Object(b.yb)(d.markerbordercolor,u.markerbordercolor),borderAlpha:Object(b.Ab)(d.markerborderalpha,u.markerborderalpha),hoverBorderThickness:d.markerborderhoverthickness,hoverBorderColor:d.markerborderhovercolor,hoverBorderAlpha:d.markerborderhoveralpha,radius:Object(b.Ab)(d.markerradius&&Object(b.Nb)(d.markerradius),7),shapeId:Object(b.yb)(d.defaultmarkershape,"circle"),labelSepChar:Object(b.yb)(d.labelsepchar,", "),tooltipSepChar:Object(b.yb)(d.tooltipsepchar,", "),autoScale:Object(b.Ab)(d.autoscalemarkers,0),tooltext:Object(b.yb)(g&&g.tooltext,d.markertooltext),dataEnabled:O,valueToRadius:Object(b.Ab)(d.markerradiusfromvalue,1),valueMarkerAlpha:Object(b.yb)(d.valuemarkeralpha,"75"),hideNull:Object(b.Ab)(d.hidenullmarkers,0),nullRadius:Object(b.Ab)(d.nullmarkerradius,d.markerradius,7),adjustViewPort:Object(b.Ab)(d.adjustviewportformarkers,0),startAngle:Object(b.Ab)(d.markerstartangle,90),maxRadius:Object(b.Ab)(d.maxmarkerradius,0),minRadius:Object(b.Ab)(d.minmarkerradius,0),applyAll:Object(b.Ab)(d.applyallmarkers,0),shadow:Object(b.Ab)(d.showmarkershadow,d.showshadow,0)},o.connectorOpts={showHoverEffect:Object(b.Ab)(d.showconnectorhovereffect,1),thickness:Object(b.Ab)(d.connectorthickness,d.markerconnthickness,"2"),color:Object(b.yb)(d.connectorcolor,d.markerconncolor,u.markerbordercolor),alpha:Object(b.yb)(d.connectoralpha,d.markerconnalpha,"100"),hoverThickness:Object(b.Ab)(d.connectorhoverthickness,d.connectorthickness,d.markerconnthickness,"2"),hoverColor:Object(b.yb)(d.connectorhovercolor,d.connectorcolor,d.markerconncolor,u.markerbordercolor),hoverAlpha:Object(b.yb)(d.connectorhoveralpha,d.connectoralpha,d.markerconnalpha,"100"),dashed:Object(b.Ab)(d.connectordashed,d.markerconndashed,0),dashLen:Object(b.Ab)(d.connectordashlen,d.markerconndashlen,3),dashGap:Object(b.Ab)(d.connectordashgap,d.markerconndashgap,2),font:Object(b.yb)(d.connectorfont,d.markerconnfont,n),fontColor:Object(b.yb)(d.connectorfontcolor,d.markerconnfontcolor,a),fontSize:Object(b.Ab)(d.connectorfontsize,d.markerconnfontsize,parseInt(i,10)),showLabels:Object(b.Ab)(d.showconnectorlabels,d.showmarkerlabels,d.showlabels,1),labelBgColor:Object(b.yb)(d.connectorlabelbgcolor,d.markerconnlabelbgcolor,u.plotfillcolor),labelBorderColor:Object(b.yb)(d.connectorlabelbordercolor,d.markerconnlabelbordercolor,u.markerbordercolor),shadow:Object(b.Ab)(d.showconnectorshadow,d.showmarkershadow,d.showshadow,0),showTooltip:Object(b.Ab)(d.showconnectortooltip,d.showmarkertooltip,d.showtooltip,1),tooltext:Object(b.yb)(g&&g.connectortooltext,d.connectortooltext),hideOpen:Object(b.Ab)(d.hideopenconnectors,1)},o.adjustViewPortForMarkers=Object(b.Ab)(d.adjustviewportformarkers,O)}},{key:"_attachMouseEvents",value:function(){var e=this,o=e.getFromEnv("eventListeners"),a=e.getFromEnv("chart-container");o.push(u.a.listen(a,b.jb?"touchstart":"click",t.searchMouseMove,e)),o.push(u.a.listen(window.document,b.jb?"touchstart":"mousemove",t.searchMouseMove,e))}},{key:"_dispose",value:function(){var e=this.getFromEnv("chart-container");b.jb&&(u.a.unlisten(e,"touchstart",t.searchMouseMove),u.a.unlisten(window.document,"touchstart",t.searchMouseMove)),u.a.unlisten(e,"click",t.searchMouseMove),u.a.unlisten(window.document,"mousemove",t.searchMouseMove),Object(r.a)(Object(c.a)(t.prototype),"_dispose",this).call(this)}},{key:"_searchNearestNeighbour",value:function(e,t){var o,a=this.getDatasets()[1];if(a){if(!a.components.kDTree)return;(o=a.getElement(e))?a.highlightPoint(o,t):a.highlightPoint(!1,t)}}},{key:"_createLayers",value:function(){Object(r.a)(Object(c.a)(t.prototype),"_createLayers",this).call(this),this._attachMouseEvents()}},{key:"_parseBackgroundCosmetics",value:function(){var e,t=this,o=t.getChildren("background")[0].config,a=t.getChildren("colorPalette")[0],n=t.getFromEnv("chart-attrib");e=o.showBorder=Object(b.Ab)(n.showcanvasborder,1),o.borderWidth=e?Object(b.Ab)(n.canvasborderthickness,1):0,o.borderRadius=o.borderRadius=Object(b.Ab)(n.canvasborderradius,0),o.borderDashStyle=o.borderDashStyle=Object(b.Ab)(n.borderdashed,0)?Object(b.Y)(Object(b.Ab)(n.borderdashlen,4),Object(b.Ab)(n.borderdashgap,2)):"none",o.borderAlpha=Object(b.yb)(n.canvasborderalpha,a.borderAlpha),o.borderColor=o.borderColor=Object(p.c)(Object(b.yb)(n.canvasbordercolor,a&&a.borderColor),o.borderAlpha)}},{key:"_getBackgroundCosmetics",value:function(){var e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(b.yb)(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(b.yb)(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(b.yb)(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(b.yb)(t.bgratio,t.canvasbgratio,o.bgratio)}}}},{key:"_parseCanvasCosmetics",value:function(){Object(r.a)(Object(c.a)(t.prototype),"_parseCanvasCosmetics",this).call(this);var e=this,o=e.config,a=e.getFromEnv("chart-attrib")||e.jsonData.map,n=e.getChildren("canvas")[0].config;o.origMarginTop=Object(b.Ab)(a.maptopmargin,11),o.origMarginLeft=Object(b.Ab)(a.mapleftmargin,11),o.origMarginBottom=Object(b.Ab)(a.mapbottommargin,11),o.origMarginRight=Object(b.Ab)(a.maprightmargin,11),o.origCanvasLeftMargin=Object(b.Ab)(a.canvasleftmargin,0),o.origCanvasRightMargin=Object(b.Ab)(a.canvasrightmargin,0),o.origCanvasTopMargin=Object(b.Ab)(a.canvastopmargin,0),o.origCanvasBottomMargin=Object(b.Ab)(a.canvasbottommargin,0),n.canvasBorderRadius=Object(b.Ab)(a.canvasborderradius,0),n.origCanvasTopPad=Object(b.Ab)(a.canvastoppadding,0),n.origCanvasBottomPad=Object(b.Ab)(a.canvasbottompadding,0),n.origCanvasLeftPad=Object(b.Ab)(a.canvasleftpadding,0),n.origCanvasRightPad=Object(b.Ab)(a.canvasrightpadding,0)}},{key:"preliminaryScaling",value:function(){for(var e,t,o,a=this.jsonData,n=a.markers&&a.markers.items||[],r=n&&n.length||0,i=1/0,l=1/0,c=-1/0,s=-1/0;r--;)e=+(o=n[r]).x,t=+o.y,i=at(i,e),l=at(l,t),c=nt(c,e),s=nt(s,t);return{x:i,y:l,x1:c,y1:s}}},{key:"getScalingParameters",value:function(e,t,o,a){var n,r,i=e/t,l=o/(e*this.config.baseScaleFactor),c=a/(t*this.config.baseScaleFactor),s=0,h=0;return l>c?(s+=(o-a*i)/2,r=200/(t*(n=c))):(h+=(a-o/i)/2,r=200/(e*(n=l))),{scaleFactor:n,strokeWidth:r,translateX:s,translateY:h}}},{key:"calculateMarkerBounds",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b=this,p=b.config,m=p.markerOpts,v=b.getDatasets(),y=b.getDataLimits(),k=y.dataMin,O=y.dataMax,C=m.hideNull,x=m.nullRadius,j=m.valueToRadius,A=1/0,w=1/0,F=-1/0,L=-1/0;for(c=0,h=v.length;c<h;c++)"markers"===(s=v[c]).getName()&&(a=s);if(a)for(c in a.calculateMarkerRadiusLimits(),r=(n=a.config||{}).minRadius,i=n.maxRadius,l=a.components&&a.components.markerObjs||{})f=(p=l[c].config).definition||{},null!==p.cleanValue?(j&&void 0===f.radius&&(p.radius=r+(i-r)*(p.cleanValue-k)/(O-k)),u=+p.radius,d=(+f.x+t)*e,g=(+f.y+o)*e,A=at(A,d-u),w=at(w,g-u),F=nt(F,d+u),L=nt(L,g+u)):C?p.__hideMarker=!0:null===p.radius&&(p.radius=x);return{x:A,y:w,x1:F,y1:L}}},{key:"_spaceManager",value:function(){var e,t,o,a,n,r,i,l,c,s=this,h=s.config,d=s.getChildren("legend")&&s.getChildren("legend")[0],g=d&&d.config.legendPos,u=s.getFromEnv("chart-attrib"),f=h.showBorder,p=h.origMarginLeft,m=h.origMarginTop,v=s.config.baseWidth,y=s.config.baseHeight,k={},O=0,C=0,x=h.markerOpts,j=h.borderWidth=f?Object(b.Ab)(u.borderthickness,1):0;s._allocateSpace({top:j,bottom:j,left:j,right:j}),s._allocateSpace(s._manageActionBarSpace&&s._manageActionBarSpace(.225*h.availableHeight)||{}),l="right"===g?.3*h.canvasWidth:.3*h.canvasHeight,h.showLegend&&s._manageLegendSpace(l),e="bottom"===g?.225*h.canvasHeight:.225*h.canvasWidth,c=s._manageChartMenuBar(e),o=h.canvasWidth,a=h.canvasHeight,x.dataEnabled?(h.adjustViewPortForMarkers?((k=s.preliminaryScaling()).x1>v&&(v=k.x1),0>k.x&&(v+=-k.x,O=-k.x),k.y1>y&&(y=k.y1),0>k.y&&(y+=-k.y,C=-k.y),t=s.getScalingParameters(v,y,o,a),r=a,i=o,0>(k=s.calculateMarkerBounds(t.scaleFactor*s.config.baseScaleFactor,O,C)).x&&(p+=-k.x,o+=k.x),0>k.y&&(m+=-k.y,a+=k.y),k.x1>i&&(o-=k.x1-i),k.y1>r&&(a-=k.y1-r)):(t=s.getScalingParameters(v,y,o,a),s.calculateMarkerBounds(t.scaleFactor*s.config.baseScaleFactor,O,C)),p+=O*(t=s.getScalingParameters(v,y,o,a)).scaleFactor*s.config.baseScaleFactor,m+=C*t.scaleFactor*s.config.baseScaleFactor):t=s.getScalingParameters(v,y,o,a),s.config.scalingParams=t,n=t.scaleFactor,t.translateX+=p,t.translateY=t.translateY+m+c.top||0,t.sFactor=n*s.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",n,",",n,",0,0"].join(""),s.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(n?n*s.config.baseScaleFactor:1),yscale:100*(n?n*s.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},s.getChildren("mapAnnotations")[0].clear(),s.getChildren("mapAnnotations")[0].configureAttributes()}},{key:"getDataLimits",value:function(){var e,t,o=this.getDatasets(),a=o.length,n=1/0,r=-1/0;for(t=0;t<a;t++)e=o[t].getDataLimits(),n=at(n,e.min),r=nt(r,e.max);return{dataMin:n,dataMax:r}}},{key:"getEntityPaths",value:function(e){var t,o={},a=this.config.entities;if(e){for(t in a)o[t]=a[t];return o}return a}},{key:"checkComplete",value:function(){var e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}],[{key:"getName",value:function(){return"maps"}},{key:"getType",value:function(){return"chartAPI"}},{key:"searchMouseMove",value:function(e){var t,o=e.data,a=o.config,n=o.getDatasets()[1],r=n&&n.getFromEnv("toolTipController"),i=n&&n.config.currentToolTip,l=o.config.lastHoveredPoint,c={};o.getFromEnv("chart-container")&&o.config.lastInteractionEvent!==e.originalEvent&&(o.config.lastInteractionEvent=e.originalEvent,(t=function(e,t){var o=Object(b.db)(t.getFromEnv("chart-container"),e),a=o.chartX,n=o.chartY,r=t.config,i=r.canvasLeft,l=r.canvasTop,c=r.canvasLeft+r.canvasWidth,s=r.canvasHeight+r.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,a>i&&a<c&&n>l&&n<s&&(o.insideCanvas=!0),o}(e,o))&&t.insideCanvas?(a.lastMouseEvent=e,c={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(c,e)):(l&&n&&n.hoverOutFn.call(l.element),o.config.lastHoveredPoint=null,r&&r.hide(i)))}}]),t}(h.a);o.d(t,"Maps",function(){return it});t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(e){return e.addDep(it)}}}}]);
//# sourceMappingURL=2.31b7d488.chunk.js.map